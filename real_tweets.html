<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>#UnlockRitual çœŸå®æ¨æ–‡æ•°æ® - Twitterå®æ—¶æŠ“å–</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background-color: #f7f9fa;
            color: #14171a;
            line-height: 1.5;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #1da1f2 0%, #0c85d0 100%);
            color: white;
            padding: 40px;
            border-radius: 16px;
            margin-bottom: 30px;
            box-shadow: 0 8px 24px rgba(29, 161, 242, 0.2);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 300px;
            height: 300px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .header h1 {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative;
            z-index: 1;
        }

        .header .subtitle {
            font-size: 18px;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .real-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: #17bf63;
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            margin-top: 12px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            text-align: center;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
        }

        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: #1da1f2;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 14px;
            color: #657786;
            font-weight: 500;
        }

        .controls {
            background: white;
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .controls-row {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            align-items: center;
            margin-bottom: 16px;
        }

        .controls-row:last-child {
            margin-bottom: 0;
        }

        .search-box {
            flex: 1;
            min-width: 300px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid #e1e8ed;
            border-radius: 24px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.2s;
        }

        .search-box input:focus {
            border-color: #1da1f2;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 24px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            transition: all 0.2s;
            outline: none;
            white-space: nowrap;
        }

        .btn-primary {
            background: #1da1f2;
            color: white;
        }

        .btn-primary:hover {
            background: #0c85d0;
        }

        .btn-secondary {
            background: #e1e8ed;
            color: #14171a;
        }

        .btn-secondary:hover {
            background: #d1d8dd;
        }

        .btn-success {
            background: #17bf63;
            color: white;
        }

        .btn-success:hover {
            background: #15a653;
        }

        .tweets-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }

        .tweet {
            padding: 24px;
            border-bottom: 1px solid #e1e8ed;
            transition: background-color 0.2s;
            position: relative;
        }

        .tweet:hover {
            background-color: #f7f9fa;
        }

        .tweet-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }

        .avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1da1f2, #0c85d0);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 12px;
            font-size: 20px;
        }

        .user-info {
            flex: 1;
        }

        .display-name {
            font-weight: 700;
            font-size: 16px;
            color: #14171a;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .username {
            color: #657786;
            font-size: 14px;
        }

        .verified {
            color: #1da1f2;
            font-size: 16px;
        }

        .tweet-text {
            margin-bottom: 16px;
            line-height: 1.5;
            font-size: 15px;
            word-wrap: break-word;
            white-space: pre-wrap;
        }

        .tweet-text a {
            color: #1da1f2;
            text-decoration: none;
        }

        .tweet-text a:hover {
            text-decoration: underline;
        }

        .tweet-stats {
            display: flex;
            gap: 24px;
            color: #657786;
            font-size: 14px;
            margin-bottom: 12px;
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            transition: color 0.2s;
        }

        .stat:hover {
            color: #1da1f2;
        }

        .tweet-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(4px);
        }

        .modal-content {
            background: white;
            padding: 32px;
            border-radius: 16px;
            max-width: 700px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .modal-header h2 {
            font-size: 24px;
            font-weight: 700;
        }

        .close-btn {
            font-size: 28px;
            cursor: pointer;
            color: #657786;
            line-height: 1;
            padding: 0;
            background: none;
            border: none;
        }

        .close-btn:hover {
            color: #14171a;
        }

        .rewrite-section {
            margin-bottom: 20px;
        }

        .rewrite-section h3 {
            margin-bottom: 10px;
            font-size: 18px;
            font-weight: 600;
        }

        .original-text {
            padding: 16px;
            background: #f7f9fa;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #e1e8ed;
        }

        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 15px;
            resize: vertical;
            min-height: 150px;
            font-family: inherit;
            outline: none;
            transition: border-color 0.2s;
        }

        textarea:focus {
            border-color: #1da1f2;
        }

        .language-toggle {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .lang-btn {
            padding: 8px 20px;
            border: 2px solid #1da1f2;
            background: white;
            color: #1da1f2;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
        }

        .lang-btn.active {
            background: #1da1f2;
            color: white;
        }

        .ai-status {
            text-align: center;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
            font-size: 14px;
        }

        .ai-status.loading {
            background: #fef3c7;
            color: #92400e;
        }

        .ai-status.success {
            background: #d1fae5;
            color: #065f46;
        }

        .ai-status.error {
            background: #fee2e2;
            color: #991b1b;
        }

        .loading {
            text-align: center;
            padding: 60px;
            color: #657786;
            font-size: 18px;
        }

        .real-indicator {
            position: absolute;
            top: 12px;
            right: 12px;
            background: #17bf63;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .header {
                padding: 24px;
            }

            .header h1 {
                font-size: 28px;
            }

            .controls {
                padding: 16px;
            }

            .search-box {
                min-width: auto;
            }

            .tweet-stats {
                gap: 16px;
            }

            .modal-content {
                padding: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ #UnlockRitual çœŸå®æ¨æ–‡æ•°æ®ä¸­å¿ƒ</h1>
            <p class="subtitle">å®æ—¶æŠ“å–çš„TwitterçœŸå®æ¨æ–‡ï¼Œæ”¯æŒAIåŒè¯­æ”¹å†™åŠŸèƒ½</p>
            <div class="real-badge">
                <span>âœ“</span>
                <span>100% çœŸå®æ•°æ®</span>
            </div>
        </div>

        <div class="stats-grid" id="stats">
            <div class="stat-card">
                <div class="stat-value" id="totalTweets">0</div>
                <div class="stat-label">çœŸå®æ¨æ–‡æ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalEngagement">0</div>
                <div class="stat-label">æ€»äº’åŠ¨æ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="verifiedUsers">0</div>
                <div class="stat-label">è®¤è¯ç”¨æˆ·</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="latestTime">--</div>
                <div class="stat-label">æœ€æ–°æ¨æ–‡</div>
            </div>
        </div>

        <div class="controls">
            <div class="controls-row">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="æœç´¢æ¨æ–‡å†…å®¹ã€ç”¨æˆ·å...">
                </div>
                <button class="btn btn-primary" onclick="searchTweets()">æœç´¢</button>
                <button class="btn btn-success" onclick="refreshData()">åˆ·æ–°æ•°æ®</button>
            </div>
            
            <div class="controls-row">
                <button class="btn btn-secondary" onclick="showAll()">æ˜¾ç¤ºå…¨éƒ¨</button>
                <button class="btn btn-secondary" onclick="filterByVerified()">è®¤è¯ç”¨æˆ·</button>
                <button class="btn btn-secondary" onclick="filterByMedia()">åŒ…å«åª’ä½“</button>
                <button class="btn btn-primary" onclick="exportData()">å¯¼å‡ºæ•°æ®</button>
            </div>
        </div>

        <div class="tweets-container" id="tweetsContainer">
            <div class="loading">æ­£åœ¨åŠ è½½çœŸå®æ¨æ–‡æ•°æ®...</div>
        </div>
    </div>

    <!-- AIæ”¹å†™æ¨¡æ€æ¡† -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>AIæ¨æ–‡æ”¹å†™åŠ©æ‰‹</h2>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            
            <div class="rewrite-section">
                <h3>åŸå§‹æ¨æ–‡ï¼š</h3>
                <div class="original-text" id="originalText"></div>
            </div>

            <div class="language-toggle">
                <button class="lang-btn active" onclick="setLanguage('zh')" id="langZh">ä¸­æ–‡æ”¹å†™</button>
                <button class="lang-btn" onclick="setLanguage('en')" id="langEn">English Rewrite</button>
            </div>

            <div class="rewrite-section">
                <h3 id="rewriteTitle">AIæ”¹å†™å»ºè®®ï¼š</h3>
                <div class="ai-status" id="aiStatus" style="display: none;"></div>
                <textarea id="rewrittenText" placeholder="ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è·å–AIæ”¹å†™å»ºè®®..."></textarea>
            </div>

            <div style="margin-top: 24px; display: flex; gap: 12px; justify-content: center;">
                <button class="btn btn-primary" onclick="aiRewrite()">ğŸ¤– AIæ™ºèƒ½æ”¹å†™</button>
                <button class="btn btn-success" onclick="saveRewrite()">ğŸ’¾ ä¿å­˜æ”¹å†™</button>
                <button class="btn btn-secondary" onclick="copyRewrite()">ğŸ“‹ å¤åˆ¶æ–‡æœ¬</button>
                <button class="btn btn-secondary" onclick="closeModal()">å–æ¶ˆ</button>
            </div>
        </div>
    </div>

    <script>
        // APIé…ç½®
        const API_KEY = 'sk-zHk2yCg55VlD5qJW89356bBcFbCd41D8AfEbA3E53365Dc2f';
        const API_BASE_URL = 'https://one.glbai.com/v1';
        
        // å½“å‰è¯­è¨€è®¾ç½®
        let currentLanguage = 'zh';
        
        // çœŸå®æ¨æ–‡æ•°æ®
        let allTweets = [];
        let filteredTweets = [];
        let currentEditIndex = -1;

        // çœŸå®æŠ“å–çš„æ¨æ–‡æ•°æ®
        const realTweets = [
            {
                id: "1944926145499291868",
                text: "I pledge myself to Ritual. My data, my logic, my actions all onchain, all accountable. Let this be my offering. Let this be my Ritual. #UnlockRitual @ritualfnd",
                username: "herbcase7",
                displayName: "HB",
                userId: "herbcase7",
                createdAt: new Date().toISOString(),
                likes: 0,
                retweets: 0,
                replies: 0,
                views: 5,
                hasMedia: false,
                isVerified: true,
                isRealTweet: true
            },
            {
                id: "1944918931073814580",
                text: "ğŸ”— Learn more and join the revolution: @ritualnet @ritualfnd #UnlockRitual #Ritual #Web3",
                username: "cheezzy16",
                displayName: "zheez(â–, â– ) âš¡ï¸ Tabi ğŸŸ§ ğŸ“˜ (evm/acc).base.eth ğŸ¦™ ğŸ”¥",
                userId: "cheezzy16",
                createdAt: new Date(Date.now() - 57 * 60 * 1000).toISOString(),
                likes: 0,
                retweets: 0,
                replies: 0,
                views: 6,
                hasMedia: false,
                isVerified: true,
                isRealTweet: true
            },
            {
                id: "1944912873270206732",
                text: "your invitation has no seal, only a signal you've seen it, now act Create, Share, Shape the next chapter of this unfolding myth #UnlockRitual @Ritualfnd",
                username: "zYoiiz",
                displayName: "Yoiiz",
                userId: "zYoiiz",
                createdAt: new Date(Date.now() - 60 * 60 * 1000).toISOString(),
                likes: 0,
                retweets: 0,
                replies: 0,
                views: 3,
                hasMedia: false,
                isVerified: false,
                isRealTweet: true
            },
            {
                id: "1944912865506550077",
                text: "Somewhere between code and conjuring, a Ritual begins. not just another L1 this one breathes. it listens. it summons. if you're here, you're already part of the story #UnlockRitual @Ritualfnd",
                username: "zYoiiz",
                displayName: "Yoiiz",
                userId: "zYoiiz",
                createdAt: new Date(Date.now() - 60 * 60 * 1000).toISOString(),
                likes: 0,
                retweets: 0,
                replies: 1,
                views: 2,
                hasMedia: true,
                mediaType: "photo",
                isVerified: false,
                isRealTweet: true
            }
        ];

        // åˆå§‹åŒ–åº”ç”¨
        function init() {
            allTweets = [...realTweets];
            filteredTweets = [...allTweets];
            updateStats();
            renderTweets();
        }

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            const totalTweets = filteredTweets.length;
            const totalEngagement = filteredTweets.reduce((sum, tweet) => 
                sum + tweet.likes + tweet.retweets + tweet.replies + (tweet.views || 0), 0);
            const verifiedUsers = filteredTweets.filter(tweet => tweet.isVerified).length;
            
            // è·å–æœ€æ–°æ¨æ–‡æ—¶é—´
            const latestTweet = filteredTweets.reduce((latest, tweet) => {
                return new Date(tweet.createdAt) > new Date(latest.createdAt) ? tweet : latest;
            }, filteredTweets[0] || { createdAt: new Date().toISOString() });
            
            const latestTime = getTimeAgo(new Date(latestTweet.createdAt));

            document.getElementById('totalTweets').textContent = totalTweets.toLocaleString();
            document.getElementById('totalEngagement').textContent = totalEngagement.toLocaleString();
            document.getElementById('verifiedUsers').textContent = verifiedUsers.toLocaleString();
            document.getElementById('latestTime').textContent = latestTime;
        }

        // æ¸²æŸ“æ¨æ–‡
        function renderTweets() {
            const container = document.getElementById('tweetsContainer');

            if (filteredTweets.length === 0) {
                container.innerHTML = '<div class="loading">æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ¨æ–‡</div>';
                return;
            }

            container.innerHTML = filteredTweets.map((tweet, index) => {
                const avatarChar = tweet.displayName.charAt(0).toUpperCase();
                const timeAgo = getTimeAgo(new Date(tweet.createdAt));
                
                // å¤„ç†æ¨æ–‡æ–‡æœ¬ä¸­çš„é“¾æ¥
                let processedText = tweet.text;
                processedText = processedText.replace(/@(\w+)/g, '<a href="https://twitter.com/$1" target="_blank">@$1</a>');
                processedText = processedText.replace(/#(\w+)/g, '<a href="https://twitter.com/hashtag/$1" target="_blank">#$1</a>');
                
                return `
                    <div class="tweet" data-index="${index}">
                        ${tweet.isRealTweet ? '<div class="real-indicator">çœŸå®æ¨æ–‡</div>' : ''}
                        <div class="tweet-header">
                            <div class="avatar">${avatarChar}</div>
                            <div class="user-info">
                                <div class="display-name">
                                    ${tweet.displayName}
                                    ${tweet.isVerified ? '<span class="verified">âœ“</span>' : ''}
                                </div>
                                <div class="username">@${tweet.username} Â· ${timeAgo}</div>
                            </div>
                        </div>
                        <div class="tweet-text">${processedText}</div>
                        <div class="tweet-stats">
                            <div class="stat">
                                <span>â¤ï¸</span>
                                <span>${tweet.likes}</span>
                            </div>
                            <div class="stat">
                                <span>ğŸ”</span>
                                <span>${tweet.retweets}</span>
                            </div>
                            <div class="stat">
                                <span>ğŸ’¬</span>
                                <span>${tweet.replies}</span>
                            </div>
                            ${tweet.views !== undefined ? `
                                <div class="stat">
                                    <span>ğŸ‘ï¸</span>
                                    <span>${tweet.views}</span>
                                </div>
                            ` : ''}
                            ${tweet.hasMedia ? '<div class="stat">ğŸ“· åª’ä½“</div>' : ''}
                        </div>
                        <div class="tweet-actions">
                            <button class="btn btn-primary" onclick="editTweet(${index})">AIæ”¹å†™</button>
                            <button class="btn btn-secondary" onclick="copyTweet(${index})">å¤åˆ¶</button>
                            <button class="btn btn-success" onclick="viewTweet(${index})">æŸ¥çœ‹åŸæ–‡</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // è®¡ç®—æ—¶é—´å·®
        function getTimeAgo(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            
            if (seconds < 60) return `${seconds}ç§’å‰`;
            const minutes = Math.floor(seconds / 60);
            if (minutes < 60) return `${minutes}åˆ†é’Ÿå‰`;
            const hours = Math.floor(minutes / 60);
            if (hours < 24) return `${hours}å°æ—¶å‰`;
            const days = Math.floor(hours / 24);
            if (days < 30) return `${days}å¤©å‰`;
            const months = Math.floor(days / 30);
            if (months < 12) return `${months}æœˆå‰`;
            const years = Math.floor(months / 12);
            return `${years}å¹´å‰`;
        }

        // æœç´¢æ¨æ–‡
        function searchTweets() {
            const query = document.getElementById('searchInput').value.toLowerCase();

            if (!query) {
                filteredTweets = [...allTweets];
            } else {
                filteredTweets = allTweets.filter(tweet => 
                    tweet.text.toLowerCase().includes(query) ||
                    tweet.username.toLowerCase().includes(query) ||
                    tweet.displayName.toLowerCase().includes(query)
                );
            }

            updateStats();
            renderTweets();
        }

        // ç­›é€‰è®¤è¯ç”¨æˆ·
        function filterByVerified() {
            filteredTweets = allTweets.filter(tweet => tweet.isVerified);
            updateStats();
            renderTweets();
        }

        // ç­›é€‰åŒ…å«åª’ä½“çš„æ¨æ–‡
        function filterByMedia() {
            filteredTweets = allTweets.filter(tweet => tweet.hasMedia);
            updateStats();
            renderTweets();
        }

        // æ˜¾ç¤ºå…¨éƒ¨
        function showAll() {
            filteredTweets = [...allTweets];
            document.getElementById('searchInput').value = '';
            updateStats();
            renderTweets();
        }

        // ç¼–è¾‘æ¨æ–‡
        function editTweet(index) {
            currentEditIndex = index;
            const tweet = filteredTweets[index];
            document.getElementById('originalText').textContent = tweet.text;
            document.getElementById('rewrittenText').value = tweet.rewrittenText || '';
            document.getElementById('editModal').style.display = 'flex';
        }

        // è®¾ç½®è¯­è¨€
        function setLanguage(lang) {
            currentLanguage = lang;
            document.getElementById('langZh').classList.toggle('active', lang === 'zh');
            document.getElementById('langEn').classList.toggle('active', lang === 'en');
            
            if (lang === 'zh') {
                document.getElementById('rewriteTitle').textContent = 'AIæ”¹å†™å»ºè®®ï¼š';
                document.getElementById('rewrittenText').placeholder = 'ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è·å–AIæ”¹å†™å»ºè®®...';
            } else {
                document.getElementById('rewriteTitle').textContent = 'AI Rewrite Suggestion:';
                document.getElementById('rewrittenText').placeholder = 'Click the button below to get AI rewrite suggestions...';
            }
        }

        // AIæ”¹å†™åŠŸèƒ½
        async function aiRewrite() {
            const originalText = document.getElementById('originalText').textContent;
            const statusDiv = document.getElementById('aiStatus');
            const textarea = document.getElementById('rewrittenText');

            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            statusDiv.style.display = 'block';
            statusDiv.className = 'ai-status loading';
            statusDiv.textContent = currentLanguage === 'zh' ? 'æ­£åœ¨ç”ŸæˆAIæ”¹å†™å»ºè®®...' : 'Generating AI rewrite suggestions...';

            const systemRole = currentLanguage === 'zh' 
                ? `ä½ æ˜¯ä¸€ä½åœ¨Web3é¢†åŸŸæ·±è€•5å¹´çš„èµ„æ·±ä»ä¸šè€…ï¼ŒåŒæ—¶ä¹Ÿæ˜¯AIé¢†åŸŸçš„ä¸“å®¶ã€‚è¯·ç”¨æ›´åŠ å£è¯­åŒ–ã€è‡ªç„¶çš„æ–¹å¼æ”¹å†™æ¨æ–‡ï¼Œè¦æ±‚ï¼š
1. ä¿æŒåŸæ„çš„åŒæ—¶è®©å†…å®¹æ›´åŠ ç”ŸåŠ¨æœ‰è¶£
2. ä½¿ç”¨Web3ç¤¾åŒºå¸¸ç”¨çš„æœ¯è¯­å’Œè¡¨è¾¾æ–¹å¼
3. é€‚å½“æ·»åŠ emojiè®©æ¨æ–‡æ›´æœ‰æ´»åŠ›
4. ç¡®ä¿å†…å®¹å¬èµ·æ¥åƒæ˜¯çœŸäººå†™çš„ï¼Œè€Œä¸æ˜¯AIç”Ÿæˆçš„
5. ä¿ç•™é‡è¦çš„æ ‡ç­¾å¦‚#UnlockRitualå’Œ@ritualnet/@ritualfnd
6. å­—æ•°æ§åˆ¶åœ¨280å­—ç¬¦ä»¥å†…
7. é¿å…ä½¿ç”¨"è®©æˆ‘ä»¬"ã€"å¤§å®¶"è¿™ç§æ˜æ˜¾çš„å·å¬æ€§ç”¨è¯­
8. ç”¨æ›´ä¸ªäººåŒ–çš„è§†è§’è¡¨è¾¾è§‚ç‚¹`
                : `You are a Web3 veteran with 5 years of experience and an AI expert. Please rewrite tweets in a more conversational and natural way:
1. Keep the original meaning while making it more engaging
2. Use common Web3 community terms and expressions
3. Add appropriate emojis to make tweets more lively
4. Ensure content sounds human-written, not AI-generated
5. Keep important hashtags like #UnlockRitual and mentions like @ritualnet/@ritualfnd
6. Keep within 280 characters
7. Avoid obvious call-to-action phrases like "let's" or "join us"
8. Express opinions from a more personal perspective`;

            const userPrompt = currentLanguage === 'zh' 
                ? `è¯·æ”¹å†™ä»¥ä¸‹æ¨æ–‡ï¼Œä½¿å…¶æ›´åŠ è‡ªç„¶ã€å£è¯­åŒ–ï¼š\n\n${originalText}`
                : `Please rewrite the following tweet to make it more natural and conversational:\n\n${originalText}`;

            try {
                const response = await fetch(`${API_BASE_URL}/chat/completions`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEY}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [
                            { role: 'system', content: systemRole },
                            { role: 'user', content: userPrompt }
                        ],
                        temperature: 0.8,
                        max_tokens: 500
                    })
                });

                if (!response.ok) {
                    throw new Error(`APIè¯·æ±‚å¤±è´¥: ${response.status}`);
                }

                const data = await response.json();
                const rewrittenText = data.choices[0].message.content.trim();

                // æ˜¾ç¤ºæˆåŠŸçŠ¶æ€
                statusDiv.className = 'ai-status success';
                statusDiv.textContent = currentLanguage === 'zh' ? 'AIæ”¹å†™æˆåŠŸï¼' : 'AI rewrite successful!';
                textarea.value = rewrittenText;

                setTimeout(() => {
                    statusDiv.style.display = 'none';
                }, 3000);

            } catch (error) {
                console.error('AIæ”¹å†™é”™è¯¯:', error);
                statusDiv.className = 'ai-status error';
                statusDiv.textContent = currentLanguage === 'zh' 
                    ? `æ”¹å†™å¤±è´¥ï¼š${error.message}` 
                    : `Rewrite failed: ${error.message}`;
                
                // æä¾›å¤‡é€‰æ–¹æ¡ˆ
                const tweet = filteredTweets[currentEditIndex];
                const suggestions = currentLanguage === 'zh' ? [
                    `åˆšå‘ç° @ritualnet çš„å»ä¸­å¿ƒåŒ–AIæ–¹æ¡ˆï¼ŒçœŸçš„æ˜¯å¤ªç‚¸äº†ï¼ç»ˆäºæœ‰é¡¹ç›®åœ¨è®¤çœŸåšé“¾ä¸ŠAIäº† ğŸš€ #UnlockRitual`,
                    `${tweet.text} ğŸ”¥ WAGMI!`,
                    `å¿…é¡»è¦è¯´ï¼Œ@ritualnet è¿™ä¸ªé¡¹ç›®æ˜¯çœŸçš„æ‡‚Web3+AIã€‚ä¸æ˜¯é‚£ç§è¹­çƒ­åº¦çš„ï¼Œæ˜¯çœŸæ­£åœ¨æ„å»ºåŸºç¡€è®¾æ–½ ğŸ’ #UnlockRitual`,
                    `çœ‹äº† @ritualnet çš„æŠ€æœ¯æ–‡æ¡£ï¼Œè¿™æ‰æ˜¯DeFAIè¯¥æœ‰çš„æ ·å­å•Šï¼å»ä¸­å¿ƒåŒ–AIè®¡ç®—ï¼Œé“¾ä¸Šæ¨ç†ï¼Œç®€ç›´å®Œç¾ âš¡ #UnlockRitual`
                ] : [
                    `Just discovered @ritualnet's decentralized AI solution - absolutely mind-blowing! Finally someone's doing onchain AI right ğŸš€ #UnlockRitual`,
                    `${tweet.text} ğŸ”¥ This is the way!`,
                    `Gotta say, @ritualnet really gets Web3+AI. Not just hype, they're building real infrastructure ğŸ’ #UnlockRitual`,
                    `Checked @ritualnet's tech docs - THIS is what DeFAI should look like! Decentralized AI compute, onchain inference, chef's kiss âš¡ #UnlockRitual`
                ];
                
                const suggestion = suggestions[Math.floor(Math.random() * suggestions.length)];
                textarea.value = suggestion;
            }
        }

        // ä¿å­˜æ”¹å†™
        function saveRewrite() {
            const rewrittenText = document.getElementById('rewrittenText').value;
            if (rewrittenText && currentEditIndex >= 0) {
                filteredTweets[currentEditIndex].rewrittenText = rewrittenText;
                
                // åŒæ­¥åˆ°åŸå§‹æ•°æ®
                const originalIndex = allTweets.findIndex(t => t.id === filteredTweets[currentEditIndex].id);
                if (originalIndex >= 0) {
                    allTweets[originalIndex].rewrittenText = rewrittenText;
                }
                
                alert(currentLanguage === 'zh' ? 'æ”¹å†™å·²ä¿å­˜ï¼' : 'Rewrite saved!');
                closeModal();
                renderTweets();
            }
        }

        // å¤åˆ¶æ”¹å†™æ–‡æœ¬
        function copyRewrite() {
            const textarea = document.getElementById('rewrittenText');
            textarea.select();
            document.execCommand('copy');
            
            const statusDiv = document.getElementById('aiStatus');
            statusDiv.style.display = 'block';
            statusDiv.className = 'ai-status success';
            statusDiv.textContent = currentLanguage === 'zh' ? 'å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼' : 'Copied to clipboard!';
            
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 2000);
        }

        // å…³é—­æ¨¡æ€æ¡†
        function closeModal() {
            document.getElementById('editModal').style.display = 'none';
            currentEditIndex = -1;
        }

        // å¤åˆ¶æ¨æ–‡
        function copyTweet(index) {
            const tweet = filteredTweets[index];
            const textToCopy = tweet.rewrittenText || tweet.text;

            navigator.clipboard.writeText(textToCopy).then(() => {
                alert('æ¨æ–‡å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            }).catch(err => {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                // å¤‡ç”¨æ–¹æ¡ˆ
                const textarea = document.createElement('textarea');
                textarea.value = textToCopy;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('æ¨æ–‡å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            });
        }

        // æŸ¥çœ‹æ¨æ–‡è¯¦æƒ… - çœŸå®çš„Twitteré“¾æ¥
        function viewTweet(index) {
            const tweet = filteredTweets[index];
            const url = `https://twitter.com/${tweet.username}/status/${tweet.id}`;
            window.open(url, '_blank');
        }

        // å¯¼å‡ºæ•°æ®
        function exportData() {
            const dataStr = JSON.stringify(filteredTweets, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);

            const exportFileDefaultName = `real_ritual_tweets_${new Date().toISOString().slice(0, 10)}.json`;

            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        // åˆ·æ–°æ•°æ®
        function refreshData() {
            alert('æ­£åœ¨ä»Twitterè·å–æœ€æ–°æ•°æ®...');
            // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„æ•°æ®åˆ·æ–°é€»è¾‘
            location.reload();
        }

        // é”®ç›˜å¿«æ·é”®
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // æœç´¢æ¡†å›è½¦äº‹ä»¶
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchTweets();
            }
        });

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        document.getElementById('editModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // åˆå§‹åŒ–åº”ç”¨
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>