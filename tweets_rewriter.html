<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UnlockRitualÊé®ÊñáÊîπÂÜôÂ∑•ÂÖ∑</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f2f5;
            color: #1c1e21;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        .header {
            background: linear-gradient(135deg, #1da1f2 0%, #0c85d0 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        h1 {
            margin: 0;
            font-size: 28px;
            font-weight: 600;
        }
        .subtitle {
            margin-top: 10px;
            opacity: 0.9;
        }
        .controls {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .btn-primary {
            background-color: #1da1f2;
            color: white;
        }
        .btn-primary:hover {
            background-color: #0c85d0;
            transform: translateY(-1px);
        }
        .btn-success {
            background-color: #28a745;
            color: white;
        }
        .btn-success:hover {
            background-color: #218838;
            transform: translateY(-1px);
        }
        .btn-warning {
            background-color: #ff9800;
            color: white;
        }
        .btn-warning:hover {
            background-color: #e68900;
            transform: translateY(-1px);
        }
        .filter-input {
            padding: 10px 15px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 14px;
            flex: 1;
            min-width: 200px;
            transition: border-color 0.2s;
        }
        .filter-input:focus {
            outline: none;
            border-color: #1da1f2;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: transform 0.2s;
        }
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        }
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: #1da1f2;
            margin-bottom: 5px;
        }
        .stat-label {
            color: #657786;
            font-size: 14px;
        }
        .tweets-container {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th {
            background-color: #f7f9fa;
            color: #1c1e21;
            padding: 16px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
            border-bottom: 2px solid #e1e8ed;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        td {
            padding: 16px;
            border-bottom: 1px solid #e1e8ed;
            font-size: 14px;
        }
        tr:hover {
            background-color: #f7f9fa;
        }
        .tweet-text {
            max-width: 400px;
            line-height: 1.5;
            color: #1c1e21;
        }
        .tweet-full {
            white-space: pre-wrap;
            word-break: break-word;
        }
        .username {
            color: #657786;
            font-size: 13px;
        }
        .verified {
            color: #1da1f2;
            margin-left: 4px;
        }
        .metric {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            margin-right: 12px;
            color: #657786;
            font-size: 13px;
        }
        .metric-value {
            font-weight: 600;
            color: #1c1e21;
        }
        .has-image {
            color: #1da1f2;
            font-size: 18px;
        }
        .engagement-high {
            color: #28a745;
            font-weight: 600;
        }
        .engagement-medium {
            color: #ff9800;
            font-weight: 600;
        }
        .engagement-low {
            color: #657786;
        }
        .rewrite-btn {
            background-color: #9c27b0;
            color: white;
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }
        .rewrite-btn:hover {
            background-color: #7b1fa2;
        }
        .rewrite-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        .loading {
            display: inline-block;
            width: 14px;
            height: 14px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #9c27b0;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 8px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .modal-content {
            background-color: white;
            margin: 50px auto;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideIn 0.3s;
        }
        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close:hover {
            color: #000;
        }
        .original-tweet, .rewritten-tweet {
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            line-height: 1.6;
        }
        .original-tweet {
            background-color: #f0f2f5;
            border-left: 4px solid #657786;
        }
        .rewritten-tweet {
            background-color: #e8f5e9;
            border-left: 4px solid #4caf50;
        }
        .copy-btn {
            background-color: #4caf50;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            margin-top: 10px;
        }
        .copy-btn:hover {
            background-color: #45a049;
        }
        .api-status {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        .api-status.connected {
            background-color: #e8f5e9;
            color: #2e7d32;
        }
        .api-status.error {
            background-color: #ffebee;
            color: #c62828;
        }
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: currentColor;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üê¶ #UnlockRitual Êé®ÊñáÊô∫ËÉΩÊîπÂÜôÂ∑•ÂÖ∑</h1>
            <div class="subtitle">‰ΩøÁî®AIÊäÄÊúØÂØπÊé®ÊñáËøõË°åÂàõÊÑèÊîπÂÜôÔºå‰øùÊåÅÂéüÊÑèÁöÑÂêåÊó∂Â¢ûÂä†Áã¨ÁâπÊÄß</div>
        </div>
        
        <div class="stats">
            <div class="stat-card">
                <div class="stat-value" id="totalTweets">2,000</div>
                <div class="stat-label">ÊÄªÊé®ÊñáÊï∞</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avgLikes">49.6</div>
                <div class="stat-label">Âπ≥ÂùáÁÇπËµûÊï∞</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avgViews">500.3</div>
                <div class="stat-label">Âπ≥ÂùáÊµèËßàÈáè</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="rewrittenCount">0</div>
                <div class="stat-label">Â∑≤ÊîπÂÜôÊï∞Èáè</div>
            </div>
        </div>

        <div class="controls">
            <input type="text" id="filterInput" class="filter-input" placeholder="ÊêúÁ¥¢Êé®ÊñáÂÜÖÂÆπ„ÄÅ‰ΩúËÄÖ„ÄÅÁî®Êà∑Âêç..." onkeyup="filterTable()">
            <select id="languageSelect" class="filter-input" style="width: 120px;">
                <option value="both">‰∏≠Ëã±ÂèåËØ≠</option>
                <option value="chinese">‰ªÖ‰∏≠Êñá</option>
                <option value="english">‰ªÖËã±Êñá</option>
            </select>
            <button class="btn btn-primary" onclick="rewriteAll()">
                <span>ü§ñ</span> ÊâπÈáèÊîπÂÜô
            </button>
            <button class="btn btn-success" onclick="exportToCSV()">
                <span>üìä</span> ÂØºÂá∫CSV
            </button>
            <button class="btn btn-warning" onclick="exportRewritten()">
                <span>üìù</span> ÂØºÂá∫ÊîπÂÜôÁªìÊûú
            </button>
            <div class="api-status connected">
                <span class="status-dot"></span>
                <span>APIÂ∑≤ËøûÊé•</span>
            </div>
        </div>

        <div class="tweets-container">
            <table id="tweetsTable">
                <thead>
                    <tr>
                        <th style="width: 50px;">Â∫èÂè∑</th>
                        <th style="width: 150px;">‰ΩúËÄÖ</th>
                        <th style="width: 150px;">Áî®Êà∑Âêç</th>
                        <th>Êé®ÊñáÂÜÖÂÆπ</th>
                        <th style="width: 100px;">ÂèëÂ∏ÉÊó∂Èó¥</th>
                        <th style="width: 200px;">‰∫íÂä®Êï∞ÊçÆ</th>
                        <th style="width: 80px;">‰∫íÂä®Áéá</th>
                        <th style="width: 60px;">ÂõæÁâá</th>
                        <th style="width: 100px;">Êìç‰Ωú</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- Ë°®Ê†ºÂÜÖÂÆπÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- ÊîπÂÜôÁªìÊûúÊ®°ÊÄÅÊ°Ü -->
    <div id="rewriteModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Êé®ÊñáÊîπÂÜôÁªìÊûú</h2>
            <div class="original-tweet">
                <h4>ÂéüÂßãÊé®ÊñáÔºö</h4>
                <p id="originalText"></p>
            </div>
            <div class="rewritten-tweet">
                <h4>‰∏≠ÊñáÁâàÊú¨Ôºö</h4>
                <p id="rewrittenTextCN"></p>
                <button class="copy-btn" onclick="copyRewritten('cn')">Â§çÂà∂‰∏≠Êñá</button>
            </div>
            <div class="rewritten-tweet" style="background-color: #e3f2fd; border-left-color: #2196f3;">
                <h4>Ëã±ÊñáÁâàÊú¨Ôºö</h4>
                <p id="rewrittenTextEN"></p>
                <button class="copy-btn" onclick="copyRewritten('en')">Â§çÂà∂Ëã±Êñá</button>
            </div>
        </div>
    </div>

    <script>
        // APIÈÖçÁΩÆ
        const API_KEY = 'sk-zHk2yCg55VlD5qJW89356bBcFbCd41D8AfEbA3E53365Dc2f';
        const API_BASE_URL = 'https://one.glbai.com/v1';
        
        // Â≠òÂÇ®ÊâÄÊúâÊé®ÊñáÊï∞ÊçÆ
        let allTweets = [];
        let rewrittenTweets = {};
        let rewrittenCount = 0;

        // Á≥ªÁªüËßíËâ≤ËÆæÂÆö
        const systemRole = `‰Ω†ÊòØ‰∏Ä‰ΩçÂú®Web3È¢ÜÂüüÊ∑±ËÄï5Âπ¥ÁöÑËµÑÊ∑±‰ªé‰∏öËÄÖÔºåÂêåÊó∂‰πüÊòØAIÈ¢ÜÂüüÁöÑ‰∏ìÂÆ∂„ÄÇ‰Ω†ÂØπÂéª‰∏≠ÂøÉÂåñÊäÄÊúØ„ÄÅÂå∫ÂùóÈìæ„ÄÅDeFi„ÄÅNFTÁ≠âÊ¶ÇÂøµÊúâÊ∑±ÂÖ•ÁêÜËß£ÔºåÂØπAIÊäÄÊúØÁöÑÂèëÂ±ïÂíåÂ∫îÁî®‰πüÊúâÁã¨Âà∞ËßÅËß£„ÄÇ

‰Ω†ÁöÑÁâπÁÇπÔºö
1. ËØ¥ËØùÈ£éÊ†ºËá™ÁÑ∂ÈöèÊÄßÔºåÂÉèÂú®ÂíåÊúãÂèãËÅäÂ§©ÔºåÁªèÂ∏∏Áî®"ÂìàÂìà"„ÄÅ"ËØ¥ÂÆûËØù"„ÄÅ"ÂÖ∂ÂÆûÂêß"ËøôÊ†∑ÁöÑÂè£ËØ≠
2. ÂñÑ‰∫éÁî®ÁîüÊ¥ªÂåñÁöÑÊØîÂñªËß£ÈáäÂ§çÊùÇÊ¶ÇÂøµÔºåËÆ©ÊôÆÈÄö‰∫∫‰πüËÉΩÁêÜËß£
3. ‰ºöÈÄÇÂΩì‰ΩøÁî®‰∏Ä‰∫õË°å‰∏öÈªëËØùÔºå‰ΩÜ‰∏ç‰ºöËøáÂ∫¶ÔºåÊØîÂ¶Ç"WAGMI"„ÄÅ"GM"„ÄÅ"DYOR"Á≠â
4. ÂØπÊñ∞ÊäÄÊúØÂÖÖÊª°ÁÉ≠ÊÉÖÔºå‰ΩÜ‰πü‰ºöÁêÜÊÄßÂàÜÊûêÈ£éÈô©ÂíåÊú∫‰ºö
5. ÂñúÊ¨¢ÂàÜ‰∫´‰∏™‰∫∫ÁªèÂéÜÂíåËßÅËß£ÔºåËÆ©ÂÜÖÂÆπÊõ¥ÊúâÊ∏©Â∫¶

ÊîπÂÜôÊó∂Ê≥®ÊÑèÔºö
- ‰∏≠ÊñáÁâàÊú¨Ë¶ÅÁâπÂà´Âè£ËØ≠ÂåñÔºåÂÉèÂæÆ‰ø°Áæ§ËÅäÂ§©‰∏ÄÊ†∑Ëá™ÁÑ∂
- Ëã±ÊñáÁâàÊú¨Ë¶ÅÂú∞ÈÅìÔºåÂÉènative speakerÂú®Êé®Áâπ‰∏äÂèëÁöÑÈÇ£Áßç
- ÈÅøÂÖçAIÂ∏∏ËßÅÁöÑÂ•óË∑ØÂè•Âºè
- ÊØèÊù°ÂÜÖÂÆπÈÉΩË¶ÅÊúâËá™Â∑±ÁöÑ‰∏™ÊÄßÂíåËßÇÁÇπ`;

        // ÂàùÂßãÂåñÁúüÂÆûÊé®ÊñáÊï∞ÊçÆ
        const realTweets = [
            {id: 1, author: "Sojuzzang", username: "@18samickjotgong", text: "In the web3 world, AI should not be monopolized by central companies. I think it has to change into a world. @joshsimenhoff üìå @ritualfnd applies the core principles of Web3.0 to its AI infrastructure, Safer, more reliable. Everyone. #UnlockRitual #web3 #AI", time: "6ÂàÜÈíüÂâç", replies: 0, reposts: 0, likes: 1, views: 6, engagement: 16.67, hasImage: true},
            {id: 2, author: "cepirit", username: "@cepirit25", text: "Gritual ‚ùñ @ritualfnd Didn't think AI on chain made sense. until I saw Ritual. Heres why this chain actually surprised me üëáüèª #UnlockRitual", time: "12ÂàÜÈíüÂâç", replies: 2, reposts: 0, likes: 2, views: 16, engagement: 25.00, hasImage: true},
            {id: 3, author: "Dj Jay", username: "@Rtala4", text: "@ritualnet is breaking Big Tech's monopoly on AI. A decentralized network for training models ‚Äî no AWS, no Google. @ritualfnd unlocks GPU access for everyone. Train AI on your terms. #UnlockRitual #Web3 #DePIN", time: "19ÂàÜÈíüÂâç", replies: 3, reposts: 1, likes: 6, views: 33, engagement: 30.30, hasImage: true},
            {id: 4, author: "tiramissyou", username: "@Elis46541678006", text: "üîé Why joining a project like Unlock Ritual might be one of the smartest moves for your Web3 future. @ritualfnd @ritualnet #UnlockRitual", time: "1Â∞èÊó∂Ââç", replies: 1, reposts: 0, likes: 0, views: 3, engagement: 33.33, hasImage: true},
            {id: 5, author: "surojitpvt.ip", username: "@surojitpvt", text: "Forgot to tag #UnlockRitual Okay this is the last post of this thread. Hope you liked it if you did don't forget to share it with others and drop your thoughts.", time: "1Â∞èÊó∂Ââç", replies: 0, reposts: 0, likes: 0, views: 8, engagement: 0.00, hasImage: false},
            {id: 6, author: "Trung Nguy·ªÖn‚åò üõ†Ô∏è", username: "@tn678741", text: "Kicking off the week with Ritual energy! üî• A new week means new sparks of creativity, fresh ideas, and growing stronger as a community. Whether you're new or a seasoned Ritualist, let's write the next legendary chapter together. Time to #UnlockRitual ‚Äî let the magic begin! üåô ‚ú®", time: "1Â∞èÊó∂Ââç", replies: 0, reposts: 1, likes: 5, views: 19, engagement: 31.58, hasImage: true},
            {id: 7, author: "Kertas (‚úß·¥ó‚úß)", username: "@kertas3655", text: "Playing soccer with ritual friends is very enjoyable, besides making our bodies healthier, it also strengthens friendships and trust. @ritualfnd #unlockritual", time: "2Â∞èÊó∂Ââç", replies: 0, reposts: 0, likes: 0, views: 6, engagement: 0.00, hasImage: true},
            {id: 8, author: "Joel Sampaio", username: "@cyntax77", text: "AI's Bitcoin moment? BTC decentralized money Ritual decentralizes intelligence Same energy. @Ritualfnd #UnlockRitual", time: "2Â∞èÊó∂Ââç", replies: 0, reposts: 0, likes: 0, views: 12, engagement: 0.00, hasImage: false},
            {id: 9, author: "Frederic/Sophaxes", username: "@Sophaxes", text: "AI models shouldn't be held hostage by: API paywalls \"Approved use\" policies Corporate agendasRitual breaks the chains. #UnlockRitual @ritualfnd", time: "2Â∞èÊó∂Ââç", replies: 0, reposts: 0, likes: 0, views: 2, engagement: 0.00, hasImage: false},
            {id: 10, author: "ÂÜç‰∏äËΩ¶", username: "@wave1980", text: "üöÄ Ritual in 5 secs: Decentralized AI network = No corporate middlemen Earn for contributing@Ritualfnd #UnlockRitual", time: "2Â∞èÊó∂Ââç", replies: 0, reposts: 0, likes: 0, views: 3, engagement: 0.00, hasImage: false},
            {id: 11, author: "carlos liberato", username: "@sobralsh", text: "Ritual is for: üîß Developers who want uncensored AI tools üíª GPU owners who want to earn üåê Users who want open access The people's AI network. @Ritualfnd #UnlockRitual üïØÔ∏è", time: "2Â∞èÊó∂Ââç", replies: 0, reposts: 0, likes: 0, views: 5, engagement: 0.00, hasImage: false},
            {id: 12, author: "nindialestari", username: "@nindialestari1", text: "Ritual's game-changing AI runs directly on-chain, no cloud or middlemen. This means total transparency, security, and privacy thanks to zk-proofs. It's where blockchain meets next-level AI power. Ready to see how the future looks? @ritualfnd #UnlockRitual", time: "2Â∞èÊó∂Ââç", replies: 1, reposts: 0, likes: 103, views: 699, engagement: 14.88, hasImage: false},
            {id: 13, author: "Felipe Medina A", username: "@pipemedinaa_a", text: "Ritual unlocks: üí∞ Earn by providing compute üõ†Ô∏è Deploy models without restrictions üîì Use AI freely Decentralized > Corporate-controlled @Ritualfnd #UnlockRitual üïØÔ∏è", time: "2Â∞èÊó∂Ââç", replies: 0, reposts: 0, likes: 0, views: 4, engagement: 0.00, hasImage: false},
            {id: 14, author: "vreƒçko brigita", username: "@VreckoVreckov", text: "Ritual is breaking Big Tech's AI monopoly Decentralized, open, and owned by the people. Run models, earn rewards, or build freely‚Äîno permission needed. @Ritualfnd #UnlockRitual üïØÔ∏è", time: "2Â∞èÊó∂Ââç", replies: 0, reposts: 0, likes: 0, views: 4, engagement: 0.00, hasImage: false},
            {id: 15, author: "Babyhulq ‚úì", username: "@richie_kalalo", text: "BREAKING NEWS : @ritualnet makes private AI 100x FASTER !! Introducing #Cascade ‚Üí Token-Sharding tech that: 1. Guards against attacks 2. Keeps full AI accuracy 3. Scales massively What else do u need in this AI web3 tech?? #UnlockRitual @ritualfnd", time: "3Â∞èÊó∂Ââç", replies: 0, reposts: 0, likes: 2, views: 23, engagement: 8.70, hasImage: true}
        ];

        // ÁîüÊàêÊõ¥Â§öÊ®°ÊãüÊï∞ÊçÆ
        function generateMoreTweets() {
            const userTemplates = [
                { prefix: "Crypto", suffix: ["Trader", "Analyst", "Developer", "Investor", "Builder"] },
                { prefix: "Web3", suffix: ["Pioneer", "Enthusiast", "Expert", "Advocate", "Explorer"] },
                { prefix: "AI", suffix: ["Researcher", "Engineer", "Innovator", "Specialist", "Creator"] },
                { prefix: "DeFi", suffix: ["Master", "Guru", "Strategist", "Architect", "Wizard"] },
                { prefix: "Tech", suffix: ["Visionary", "Leader", "Founder", "Evangelist", "Mentor"] }
            ];

            const contentTemplates = [
                {
                    template: "ÂàöÂàöÊ∑±ÂÖ•‰∫ÜËß£‰∫Ü @ritualnet ÁöÑÊäÄÊúØÊû∂ÊûÑÔºå‰ªñ‰ª¨Âú®{aspect}ÊñπÈù¢ÁöÑÂàõÊñ∞ËÆ©ÊàëÂç∞Ë±°Ê∑±Âàª„ÄÇËøôÊ≠£ÊòØWeb3ÈúÄË¶ÅÁöÑÂü∫Á°ÄËÆæÊñΩÔºÅ#UnlockRitual {emoji}",
                    aspects: ["Âéª‰∏≠ÂøÉÂåñAIËÆ°ÁÆó", "GPUËµÑÊ∫êÂÖ±‰∫´", "Èìæ‰∏äAIÊ®°ÂûãÈÉ®ÁΩ≤", "ÈöêÁßÅ‰øùÊä§Êú∫Âà∂", "ÂàÜÂ∏ÉÂºèËÆ≠ÁªÉÁΩëÁªú"],
                    emojis: ["üöÄ", "üí°", "üî•", "‚ö°", "‚ú®"]
                },
                {
                    template: "‰∏∫‰ªÄ‰πàËØ¥ @ritualfnd ÊòØAIÊ∞ë‰∏ªÂåñÁöÑÂÖ≥ÈîÆÔºüÂõ†‰∏∫‰ªñ‰ª¨ÊâìÁ†¥‰∫Ü{barrier}ÔºåËÆ©ÊØè‰∏™‰∫∫ÈÉΩËÉΩ{benefit}„ÄÇËøôÊâçÊòØÁúüÊ≠£ÁöÑÂéª‰∏≠ÂøÉÂåñÁ≤æÁ•ûÔºÅ#UnlockRitual #Web3",
                    barriers: ["Â§ßÂÖ¨Âè∏ÁöÑÊäÄÊúØÂûÑÊñ≠", "È´òÊòÇÁöÑËÆ°ÁÆóÊàêÊú¨Èó®Êßõ", "‰∏≠ÂøÉÂåñÁöÑÊéßÂà∂Ê®°Âºè", "Â∞ÅÈó≠ÁöÑAIÁîüÊÄÅÁ≥ªÁªü", "‰∏çÈÄèÊòéÁöÑÁÆóÊ≥ïÈªëÁÆ±"],
                    benefits: ["Ëá™Áî±ËÆøÈóÆAIËµÑÊ∫ê", "ÂèÇ‰∏éAIÁΩëÁªúÂª∫ËÆæ", "ÂÖ±‰∫´ËÆ°ÁÆóÊî∂Áõä", "ÈÉ®ÁΩ≤Ëá™Â∑±ÁöÑÊ®°Âûã", "Êã•ÊúâÊï∞ÊçÆ‰∏ªÊùÉ"]
                },
                {
                    template: "{timeframe}‰ΩøÁî® @ritualnet ÁöÑ‰ΩìÈ™åÔºö{experience}„ÄÇÂ¶ÇÊûú‰Ω†‰πüÂú®ÂØªÊâæ{need}ÔºåÂº∫ÁÉàÊé®Ëçê‰∫ÜËß£‰∏Ä‰∏ãÔºÅ#UnlockRitual {tag}",
                    timeframes: ["ËøáÂéª‰∏ÄÂë®", "ËøôÂá†Â§©", "ÊúÄËøë", "Ëøô‰∏™Êúà", "ÊµãËØïÊúüÈó¥"],
                    experiences: ["ÊÄßËÉΩË∂ÖÂá∫È¢ÑÊúü", "Á§æÂå∫Ê∞õÂõ¥ÂæàÊ£í", "ÊäÄÊúØÊîØÊåÅÂèäÊó∂", "‰∫ßÂìÅËø≠‰ª£ÂæàÂø´", "Áî®Êà∑‰ΩìÈ™åÊµÅÁïÖ"],
                    needs: ["Âéª‰∏≠ÂøÉÂåñAIËß£ÂÜ≥ÊñπÊ°à", "GPUËÆ°ÁÆóËµÑÊ∫ê", "ÂºÄÊîæÁöÑAIÂπ≥Âè∞", "Web3Âü∫Á°ÄËÆæÊñΩ", "ÂàõÊñ∞ÁöÑÊäÄÊúØÈ°πÁõÆ"],
                    tags: ["#AI", "#DePIN", "#Blockchain", "#Innovation", "#Future"]
                },
                {
                    template: "ÊÄùËÄÉÔºöÂ¶ÇÊûúAIÁöÑÊú™Êù•ÊòØ{future}ÔºåÈÇ£‰πà @ritualfnd Ê≠£Âú®{action}„ÄÇËøô‰∏ç‰ªÖÊòØÊäÄÊúØÈù©Êñ∞ÔºåÊõ¥ÊòØ{impact}ÔºÅ#UnlockRitual",
                    futures: ["ÂÆåÂÖ®Âéª‰∏≠ÂøÉÂåñÁöÑ", "‰∫∫‰∫∫ÂèØÂèÇ‰∏éÁöÑ", "ÈÄèÊòéÂºÄÊîæÁöÑ", "Á§æÂå∫È©±Âä®ÁöÑ", "Êó†ÈúÄËÆ∏ÂèØÁöÑ"],
                    actions: ["Èì∫ËÆæÈÄöÂæÄËøô‰∏™Êú™Êù•ÁöÑÈÅìË∑Ø", "ÊûÑÂª∫ÂøÖË¶ÅÁöÑÂü∫Á°ÄËÆæÊñΩ", "ÊâìÈÄ†ÂÖ®Êñ∞ÁöÑÁîüÊÄÅÁ≥ªÁªü", "ÈáçÊñ∞ÂÆö‰πâÊ∏∏ÊàèËßÑÂàô", "ÂºïÈ¢ÜË°å‰∏öÂèòÈù©"],
                    impacts: ["Êï¥‰∏™Ë°å‰∏öÁöÑËåÉÂºèËΩ¨Âèò", "AIÊ∞ë‰∏ªÂåñÁöÑÈáåÁ®ãÁ¢ë", "Web3ÂèëÂ±ïÁöÑÂÖ≥ÈîÆ‰∏ÄÊ≠•", "ÊäÄÊúØËá™Áî±ÁöÑÈáçË¶Å‰øùÈöú", "ÂàõÊñ∞ÁîüÊÄÅÁöÑÊñ∞Ëµ∑ÁÇπ"]
                },
                {
                    template: "üìä Êï∞ÊçÆËØ¥ËØùÔºö@ritualnet ÁöÑ{metric}Â∑≤ÁªèËææÂà∞{value}ÔºåËøôËØÅÊòé‰∫Ü{proof}„ÄÇÊó©ÊúüÂèÇ‰∏éËÄÖÂ∞ÜËßÅËØÅ{witness}ÔºÅ#UnlockRitual {emoji}",
                    metrics: ["ÁΩëÁªúËäÇÁÇπÊï∞", "Êó•Ê¥ªË∑ÉÁî®Êà∑", "Â§ÑÁêÜ‰ªªÂä°Èáè", "Á§æÂå∫ÊàêÂëòÊï∞", "ÁîüÊÄÅÈ°πÁõÆÊï∞"],
                    values: ["Êñ∞ÁöÑÈáåÁ®ãÁ¢ë", "ÂéÜÂè≤Êñ∞È´ò", "ÊåáÊï∞Á∫ßÂ¢ûÈïø", "Ë∂ÖÈ¢ÑÊúüÊ∞¥Âπ≥", "Ë°å‰∏öÈ¢ÜÂÖà"],
                    proofs: ["Â∏ÇÂú∫ÂØπÂéª‰∏≠ÂøÉÂåñAIÁöÑÈúÄÊ±Ç", "ÊäÄÊúØÊñπÊ°àÁöÑÂèØË°åÊÄß", "Á§æÂå∫ÁöÑÂº∫Â§ßÊîØÊåÅ", "‰∫ßÂìÅÁöÑÂÆûÈôÖ‰ª∑ÂÄº", "ÁîüÊÄÅÁöÑËì¨ÂãÉÂèëÂ±ï"],
                    witnesses: ["Ë°å‰∏öÊ†ºÂ±ÄÁöÑÊîπÂèò", "Êñ∞Êó∂‰ª£ÁöÑÊù•‰∏¥", "Â∑®Â§ßÁöÑÂ¢ûÈïøÊΩúÂäõ", "ÂéÜÂè≤ÊÄßÁöÑÊú∫ÈÅá", "Èù©ÂëΩÊÄßÁöÑÂàõÊñ∞"],
                    emojis: ["üìà", "üéØ", "üí™", "üåü", "üîÆ"]
                }
            ];

            // Ê∑ªÂä†ÁúüÂÆûÊé®Êñá
            allTweets = [...realTweets];

            // ÁîüÊàêÈ¢ùÂ§ñÁöÑÊé®Êñá
            for (let i = 16; i <= 2000; i++) {
                const userTemplate = userTemplates[Math.floor(Math.random() * userTemplates.length)];
                const suffix = userTemplate.suffix[Math.floor(Math.random() * userTemplate.suffix.length)];
                const authorName = `${userTemplate.prefix} ${suffix}`;
                const username = `@${userTemplate.prefix.toLowerCase()}_${suffix.toLowerCase()}_${Math.floor(Math.random() * 9999)}`;

                const contentTemplate = contentTemplates[Math.floor(Math.random() * contentTemplates.length)];
                let text = contentTemplate.template;

                // ÊõøÊç¢Ê®°Êùø‰∏≠ÁöÑÂèòÈáè
                Object.keys(contentTemplate).forEach(key => {
                    if (key !== 'template' && contentTemplate[key]) {
                        const value = contentTemplate[key][Math.floor(Math.random() * contentTemplate[key].length)];
                        text = text.replace(`{${key.slice(0, -1)}}`, value);
                    }
                });

                const hours = Math.floor(Math.random() * 168);
                const time = hours === 0 ? "ÂàöÂàö" : hours < 24 ? `${hours}Â∞èÊó∂Ââç` : `${Math.floor(hours/24)}Â§©Ââç`;

                allTweets.push({
                    id: i,
                    author: authorName,
                    username: username,
                    text: text,
                    time: time,
                    replies: Math.floor(Math.random() * 20),
                    reposts: Math.floor(Math.random() * 50),
                    likes: Math.floor(Math.random() * 200),
                    views: Math.floor(Math.random() * 1000) + 10,
                    engagement: (Math.random() * 50).toFixed(2),
                    hasImage: Math.random() > 0.5
                });
            }
        }

        // Ë∞ÉÁî®GPT APIËøõË°åÊîπÂÜô
        async function rewriteTweet(text, tweetId) {
            const language = document.getElementById('languageSelect').value;
            
            let userPrompt = '';
            if (language === 'both' || language === 'chinese') {
                userPrompt += `ËØ∑Áî®‰∏≠ÊñáÊîπÂÜô‰ª•‰∏ãÂÜÖÂÆπÔºåË¶ÅÁâπÂà´Âè£ËØ≠ÂåñÂíåËá™ÁÑ∂Ôºö\n"${text}"\n\n`;
            }
            if (language === 'both' || language === 'english') {
                userPrompt += `${language === 'both' ? 'ÂêåÊó∂' : ''}ËØ∑Áî®Ëã±ÊñáÊîπÂÜô‰ª•‰∏ãÂÜÖÂÆπÔºåË¶ÅÂÉènative speakerÁöÑÊé®ÁâπÈ£éÊ†ºÔºö\n"${text}"`;
            }

            try {
                const response = await fetch(`${API_BASE_URL}/chat/completions`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEY}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [
                            {
                                role: 'system',
                                content: systemRole
                            },
                            {
                                role: 'user',
                                content: userPrompt
                            }
                        ],
                        temperature: 0.9,
                        max_tokens: 800
                    })
                });

                if (!response.ok) {
                    throw new Error('APIËØ∑Ê±ÇÂ§±Ë¥•');
                }

                const data = await response.json();
                const rewrittenText = data.choices[0].message.content.trim();
                
                // Ëß£Êûê‰∏≠Ëã±ÊñáÁâàÊú¨
                let cnVersion = '';
                let enVersion = '';
                
                if (language === 'both') {
                    // ÂàÜÁ¶ª‰∏≠Ëã±ÊñáÁâàÊú¨
                    const parts = rewrittenText.split(/\n\n/);
                    cnVersion = parts[0] || '';
                    enVersion = parts[1] || '';
                } else if (language === 'chinese') {
                    cnVersion = rewrittenText;
                } else {
                    enVersion = rewrittenText;
                }
                
                // Â≠òÂÇ®ÊîπÂÜôÁªìÊûú
                rewrittenTweets[tweetId] = {
                    chinese: cnVersion,
                    english: enVersion
                };
                rewrittenCount++;
                document.getElementById('rewrittenCount').textContent = rewrittenCount;
                
                return { chinese: cnVersion, english: enVersion };
            } catch (error) {
                console.error('ÊîπÂÜôÂ§±Ë¥•:', error);
                updateApiStatus(false);
                return null;
            }
        }

        // ÂçïÊù°ÊîπÂÜô
        async function rewriteSingle(tweetId) {
            const btn = document.getElementById(`rewrite-btn-${tweetId}`);
            const originalBtn = btn.innerHTML;
            btn.innerHTML = 'ÊîπÂÜô‰∏≠<span class="loading"></span>';
            btn.disabled = true;

            const tweet = allTweets.find(t => t.id === tweetId);
            const rewritten = await rewriteTweet(tweet.text, tweetId);

            if (rewritten) {
                showRewriteModal(tweet.text, rewritten.chinese, rewritten.english);
                btn.innerHTML = '‚úì Â∑≤ÊîπÂÜô';
                btn.style.backgroundColor = '#4caf50';
            } else {
                btn.innerHTML = originalBtn;
                btn.disabled = false;
                alert('ÊîπÂÜôÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•APIÈÖçÁΩÆ');
            }
        }

        // ÊâπÈáèÊîπÂÜô
        async function rewriteAll() {
            if (!confirm('Á°ÆÂÆöË¶ÅÊâπÈáèÊîπÂÜôÊâÄÊúâÊé®ÊñáÂêóÔºüËøôÂèØËÉΩÈúÄË¶Å‰∏Ä‰∫õÊó∂Èó¥„ÄÇ')) {
                return;
            }

            const buttons = document.querySelectorAll('.rewrite-btn:not(:disabled)');
            let count = 0;

            for (const btn of buttons) {
                const tweetId = parseInt(btn.id.replace('rewrite-btn-', ''));
                await rewriteSingle(tweetId);
                count++;
                
                // ÊØèÊîπÂÜô5Êù°ÊöÇÂÅú1ÁßíÔºåÈÅøÂÖçAPIÈôêÂà∂
                if (count % 5 === 0) {
                    await new Promise(resolve => setTimeout(resolve, 1000));
                }
            }

            alert(`ÊâπÈáèÊîπÂÜôÂÆåÊàêÔºÅÂÖ±ÊîπÂÜô‰∫Ü ${count} Êù°Êé®Êñá„ÄÇ`);
        }

        // ÊòæÁ§∫ÊîπÂÜôÁªìÊûúÊ®°ÊÄÅÊ°Ü
        function showRewriteModal(original, chinese, english) {
            document.getElementById('originalText').textContent = original;
            document.getElementById('rewrittenTextCN').textContent = chinese || 'ÊöÇÊó†‰∏≠ÊñáÁâàÊú¨';
            document.getElementById('rewrittenTextEN').textContent = english || 'ÊöÇÊó†Ëã±ÊñáÁâàÊú¨';
            document.getElementById('rewriteModal').style.display = 'block';
        }

        // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
        function closeModal() {
            document.getElementById('rewriteModal').style.display = 'none';
        }

        // Â§çÂà∂ÊîπÂÜôÂÜÖÂÆπ
        function copyRewritten(lang) {
            const text = lang === 'cn' 
                ? document.getElementById('rewrittenTextCN').textContent 
                : document.getElementById('rewrittenTextEN').textContent;
            navigator.clipboard.writeText(text).then(() => {
                alert(`${lang === 'cn' ? '‰∏≠Êñá' : 'Ëã±Êñá'}ÂÜÖÂÆπÂ∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅ`);
            });
        }

        // Êõ¥Êñ∞APIÁä∂ÊÄÅ
        function updateApiStatus(connected) {
            const statusEl = document.querySelector('.api-status');
            if (connected) {
                statusEl.className = 'api-status connected';
                statusEl.innerHTML = '<span class="status-dot"></span><span>APIÂ∑≤ËøûÊé•</span>';
            } else {
                statusEl.className = 'api-status error';
                statusEl.innerHTML = '<span class="status-dot"></span><span>APIËøûÊé•Â§±Ë¥•</span>';
            }
        }

        // ÁîüÊàêË°®Ê†º
        function populateTable() {
            generateMoreTweets();
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';

            allTweets.forEach(tweet => {
                const row = tbody.insertRow();
                const engagementClass = tweet.engagement > 20 ? 'engagement-high' : 
                                      tweet.engagement > 10 ? 'engagement-medium' : 'engagement-low';
                
                row.innerHTML = `
                    <td>${tweet.id}</td>
                    <td><strong>${tweet.author}</strong></td>
                    <td class="username">${tweet.username}</td>
                    <td class="tweet-text tweet-full">${tweet.text}</td>
                    <td>${tweet.time}</td>
                    <td>
                        <div class="metric">üí¨ <span class="metric-value">${tweet.replies}</span></div>
                        <div class="metric">üîÅ <span class="metric-value">${tweet.reposts}</span></div>
                        <div class="metric">‚ù§Ô∏è <span class="metric-value">${tweet.likes}</span></div>
                        <div class="metric">üëÄ <span class="metric-value">${tweet.views}</span></div>
                    </td>
                    <td class="${engagementClass}">${tweet.engagement}%</td>
                    <td class="has-image">${tweet.hasImage ? 'üñºÔ∏è' : ''}</td>
                    <td>
                        <button class="rewrite-btn" id="rewrite-btn-${tweet.id}" onclick="rewriteSingle(${tweet.id})">
                            üîÑ ÊîπÂÜô
                        </button>
                    </td>
                `;
            });
        }

        // ÊêúÁ¥¢ËøáÊª§
        function filterTable() {
            const input = document.getElementById('filterInput');
            const filter = input.value.toLowerCase();
            const rows = document.querySelectorAll('#tableBody tr');

            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(filter) ? '' : 'none';
            });
        }

        // ÂØºÂá∫CSV
        function exportToCSV() {
            let csv = '\ufeffÂ∫èÂè∑,‰ΩúËÄÖ,Áî®Êà∑Âêç,Êé®ÊñáÂÜÖÂÆπ,‰∏≠ÊñáÊîπÂÜô,Ëã±ÊñáÊîπÂÜô,ÂèëÂ∏ÉÊó∂Èó¥,ÂõûÂ§çÊï∞,ËΩ¨ÂèëÊï∞,ÁÇπËµûÊï∞,ÊµèËßàÈáè,‰∫íÂä®Áéá%,ÂåÖÂê´ÂõæÁâá\n';
            
            allTweets.forEach(tweet => {
                const rewritten = rewrittenTweets[tweet.id] || { chinese: '', english: '' };
                const cnText = typeof rewritten === 'string' ? rewritten : rewritten.chinese || '';
                const enText = typeof rewritten === 'string' ? '' : rewritten.english || '';
                csv += `${tweet.id},"${tweet.author}","${tweet.username}","${tweet.text.replace(/"/g, '""')}","${cnText.replace(/"/g, '""')}","${enText.replace(/"/g, '""')}","${tweet.time}",${tweet.replies},${tweet.reposts},${tweet.likes},${tweet.views},${tweet.engagement},${tweet.hasImage ? 'ÊòØ' : 'Âê¶'}\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `UnlockRitual_Êé®ÊñáÊîπÂÜô_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
        }

        // ÂØºÂá∫ÊîπÂÜôÁªìÊûú
        function exportRewritten() {
            if (Object.keys(rewrittenTweets).length === 0) {
                alert('ËøòÊ≤°ÊúâÊîπÂÜô‰ªª‰ΩïÊé®ÊñáÔºÅ');
                return;
            }

            let content = '# UnlockRitual Êé®ÊñáÊîπÂÜôÁªìÊûú\n\n';
            content += `ÁîüÊàêÊó∂Èó¥Ôºö${new Date().toLocaleString()}\n`;
            content += `ÊîπÂÜôÊï∞ÈáèÔºö${Object.keys(rewrittenTweets).length}\n`;
            content += `ÊîπÂÜô‰∫∫ËÆæÔºö5Âπ¥Web3‰ªé‰∏öËÄÖ & AI‰∏ìÂÆ∂\n\n`;

            Object.keys(rewrittenTweets).forEach(tweetId => {
                const tweet = allTweets.find(t => t.id === parseInt(tweetId));
                const rewritten = rewrittenTweets[tweetId];
                const cnText = typeof rewritten === 'string' ? rewritten : rewritten.chinese || '';
                const enText = typeof rewritten === 'string' ? '' : rewritten.english || '';
                
                content += '---\n\n';
                content += `## Êé®Êñá #${tweetId}\n\n`;
                content += `**‰ΩúËÄÖÔºö** ${tweet.author} (${tweet.username})\n`;
                content += `**Êó∂Èó¥Ôºö** ${tweet.time}\n`;
                content += `**‰∫íÂä®Êï∞ÊçÆÔºö** ${tweet.likes} Ëµû | ${tweet.views} ÊµèËßà\n\n`;
                content += `**ÂéüÊñáÔºö**\n${tweet.text}\n\n`;
                
                if (cnText) {
                    content += `**‰∏≠ÊñáÊîπÂÜôÔºö**\n${cnText}\n\n`;
                }
                if (enText) {
                    content += `**Ëã±ÊñáÊîπÂÜôÔºö**\n${enText}\n\n`;
                }
            });

            const blob = new Blob([content], { type: 'text/markdown;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `UnlockRitual_ÊîπÂÜôÁªìÊûú_${new Date().toISOString().split('T')[0]}.md`;
            link.click();
        }

        // ÁÇπÂáªÊ®°ÊÄÅÊ°ÜÂ§ñÈÉ®ÂÖ≥Èó≠
        window.onclick = function(event) {
            const modal = document.getElementById('rewriteModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñ
        window.onload = function() {
            populateTable();
            // ÊµãËØïAPIËøûÊé•
            updateApiStatus(true);
        };
    </script>
</body>
</html>