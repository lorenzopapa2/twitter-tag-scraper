<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UnlockRitualæ¨æ–‡æ”¹å†™å·¥å…·</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f2f5;
            color: #1c1e21;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        .header {
            background: linear-gradient(135deg, #1da1f2 0%, #0c85d0 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        h1 {
            margin: 0;
            font-size: 28px;
            font-weight: 600;
        }
        .subtitle {
            margin-top: 10px;
            opacity: 0.9;
        }
        .controls {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .btn-primary {
            background-color: #1da1f2;
            color: white;
        }
        .btn-primary:hover {
            background-color: #0c85d0;
            transform: translateY(-1px);
        }
        .btn-success {
            background-color: #28a745;
            color: white;
        }
        .btn-success:hover {
            background-color: #218838;
            transform: translateY(-1px);
        }
        .btn-warning {
            background-color: #ff9800;
            color: white;
        }
        .btn-warning:hover {
            background-color: #e68900;
            transform: translateY(-1px);
        }
        .filter-input {
            padding: 10px 15px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 14px;
            flex: 1;
            min-width: 200px;
            transition: border-color 0.2s;
        }
        .filter-input:focus {
            outline: none;
            border-color: #1da1f2;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: transform 0.2s;
        }
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        }
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: #1da1f2;
            margin-bottom: 5px;
        }
        .stat-label {
            color: #657786;
            font-size: 14px;
        }
        .tweets-container {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th {
            background-color: #f7f9fa;
            color: #1c1e21;
            padding: 16px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
            border-bottom: 2px solid #e1e8ed;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        td {
            padding: 16px;
            border-bottom: 1px solid #e1e8ed;
            font-size: 14px;
        }
        tr:hover {
            background-color: #f7f9fa;
        }
        .tweet-text {
            max-width: 400px;
            line-height: 1.5;
            color: #1c1e21;
        }
        .tweet-full {
            white-space: pre-wrap;
            word-break: break-word;
        }
        .username {
            color: #657786;
            font-size: 13px;
        }
        .verified {
            color: #1da1f2;
            margin-left: 4px;
        }
        .metric {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            margin-right: 12px;
            color: #657786;
            font-size: 13px;
        }
        .metric-value {
            font-weight: 600;
            color: #1c1e21;
        }
        .has-image {
            color: #1da1f2;
            font-size: 18px;
        }
        .engagement-high {
            color: #28a745;
            font-weight: 600;
        }
        .engagement-medium {
            color: #ff9800;
            font-weight: 600;
        }
        .engagement-low {
            color: #657786;
        }
        .rewrite-btn {
            background-color: #9c27b0;
            color: white;
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }
        .rewrite-btn:hover {
            background-color: #7b1fa2;
        }
        .rewrite-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        .loading {
            display: inline-block;
            width: 14px;
            height: 14px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #9c27b0;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 8px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .modal-content {
            background-color: white;
            margin: 50px auto;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideIn 0.3s;
        }
        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close:hover {
            color: #000;
        }
        .original-tweet, .rewritten-tweet {
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            line-height: 1.6;
        }
        .original-tweet {
            background-color: #f0f2f5;
            border-left: 4px solid #657786;
        }
        .rewritten-tweet {
            background-color: #e8f5e9;
            border-left: 4px solid #4caf50;
        }
        .copy-btn {
            background-color: #4caf50;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            margin-top: 10px;
        }
        .copy-btn:hover {
            background-color: #45a049;
        }
        .api-status {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        .api-status.connected {
            background-color: #e8f5e9;
            color: #2e7d32;
        }
        .api-status.error {
            background-color: #ffebee;
            color: #c62828;
        }
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: currentColor;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¦ #UnlockRitual æ¨æ–‡æ™ºèƒ½æ”¹å†™å·¥å…·</h1>
            <div class="subtitle">ä½¿ç”¨AIæŠ€æœ¯å¯¹æ¨æ–‡è¿›è¡Œåˆ›æ„æ”¹å†™ï¼Œä¿æŒåŸæ„çš„åŒæ—¶å¢åŠ ç‹¬ç‰¹æ€§</div>
        </div>
        
        <div class="stats">
            <div class="stat-card">
                <div class="stat-value" id="totalTweets">2,000</div>
                <div class="stat-label">æ€»æ¨æ–‡æ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avgLikes">49.6</div>
                <div class="stat-label">å¹³å‡ç‚¹èµæ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avgViews">500.3</div>
                <div class="stat-label">å¹³å‡æµè§ˆé‡</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="rewrittenCount">0</div>
                <div class="stat-label">å·²æ”¹å†™æ•°é‡</div>
            </div>
        </div>

        <div class="controls">
            <input type="text" id="filterInput" class="filter-input" placeholder="æœç´¢æ¨æ–‡å†…å®¹ã€ä½œè€…ã€ç”¨æˆ·å..." onkeyup="filterTable()">
            <select id="languageSelect" class="filter-input" style="width: 120px;">
                <option value="both">ä¸­è‹±åŒè¯­</option>
                <option value="chinese">ä»…ä¸­æ–‡</option>
                <option value="english">ä»…è‹±æ–‡</option>
            </select>
            <button class="btn btn-primary" onclick="rewriteAll()">
                <span>ğŸ¤–</span> æ‰¹é‡æ”¹å†™
            </button>
            <button class="btn btn-success" onclick="exportToCSV()">
                <span>ğŸ“Š</span> å¯¼å‡ºCSV
            </button>
            <button class="btn btn-warning" onclick="exportRewritten()">
                <span>ğŸ“</span> å¯¼å‡ºæ”¹å†™ç»“æœ
            </button>
            <div class="api-status connected">
                <span class="status-dot"></span>
                <span>APIå·²è¿æ¥</span>
            </div>
        </div>

        <div class="tweets-container">
            <table id="tweetsTable">
                <thead>
                    <tr>
                        <th style="width: 50px;">åºå·</th>
                        <th style="width: 150px;">ä½œè€…</th>
                        <th style="width: 150px;">ç”¨æˆ·å</th>
                        <th>æ¨æ–‡å†…å®¹</th>
                        <th style="width: 100px;">å‘å¸ƒæ—¶é—´</th>
                        <th style="width: 200px;">äº’åŠ¨æ•°æ®</th>
                        <th style="width: 80px;">äº’åŠ¨ç‡</th>
                        <th style="width: 60px;">å›¾ç‰‡</th>
                        <th style="width: 100px;">æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- è¡¨æ ¼å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- æ”¹å†™ç»“æœæ¨¡æ€æ¡† -->
    <div id="rewriteModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>æ¨æ–‡æ”¹å†™ç»“æœ</h2>
            <div class="original-tweet">
                <h4>åŸå§‹æ¨æ–‡ï¼š</h4>
                <p id="originalText"></p>
            </div>
            <div class="rewritten-tweet">
                <h4>ä¸­æ–‡ç‰ˆæœ¬ï¼š</h4>
                <p id="rewrittenTextCN"></p>
                <button class="copy-btn" onclick="copyRewritten('cn')">å¤åˆ¶ä¸­æ–‡</button>
            </div>
            <div class="rewritten-tweet" style="background-color: #e3f2fd; border-left-color: #2196f3;">
                <h4>è‹±æ–‡ç‰ˆæœ¬ï¼š</h4>
                <p id="rewrittenTextEN"></p>
                <button class="copy-btn" onclick="copyRewritten('en')">å¤åˆ¶è‹±æ–‡</button>
            </div>
        </div>
    </div>

    <script>
        // APIé…ç½®
        const API_KEY = 'sk-zHk2yCg55VlD5qJW89356bBcFbCd41D8AfEbA3E53365Dc2f';
        const API_BASE_URL = 'https://one.glbai.com/v1';
        
        // å­˜å‚¨æ‰€æœ‰æ¨æ–‡æ•°æ®
        let allTweets = [];
        let rewrittenTweets = {};
        let rewrittenCount = 0;

        // ç³»ç»Ÿè§’è‰²è®¾å®š
        const systemRole = `ä½ æ˜¯ä¸€ä½åœ¨Web3é¢†åŸŸæ·±è€•5å¹´çš„èµ„æ·±ä»ä¸šè€…ï¼ŒåŒæ—¶ä¹Ÿæ˜¯AIé¢†åŸŸçš„ä¸“å®¶ã€‚ä½ å¯¹å»ä¸­å¿ƒåŒ–æŠ€æœ¯ã€åŒºå—é“¾ã€DeFiã€NFTç­‰æ¦‚å¿µæœ‰æ·±å…¥ç†è§£ï¼Œå¯¹AIæŠ€æœ¯çš„å‘å±•å’Œåº”ç”¨ä¹Ÿæœ‰ç‹¬åˆ°è§è§£ã€‚

ä½ çš„ç‰¹ç‚¹ï¼š
1. è¯´è¯é£æ ¼è‡ªç„¶éšæ€§ï¼Œåƒåœ¨å’Œæœ‹å‹èŠå¤©ï¼Œç»å¸¸ç”¨"å“ˆå“ˆ"ã€"è¯´å®è¯"ã€"å…¶å®å§"è¿™æ ·çš„å£è¯­
2. å–„äºç”¨ç”Ÿæ´»åŒ–çš„æ¯”å–»è§£é‡Šå¤æ‚æ¦‚å¿µï¼Œè®©æ™®é€šäººä¹Ÿèƒ½ç†è§£
3. ä¼šé€‚å½“ä½¿ç”¨ä¸€äº›è¡Œä¸šé»‘è¯ï¼Œä½†ä¸ä¼šè¿‡åº¦ï¼Œæ¯”å¦‚"WAGMI"ã€"GM"ã€"DYOR"ç­‰
4. å¯¹æ–°æŠ€æœ¯å……æ»¡çƒ­æƒ…ï¼Œä½†ä¹Ÿä¼šç†æ€§åˆ†æé£é™©å’Œæœºä¼š
5. å–œæ¬¢åˆ†äº«ä¸ªäººç»å†å’Œè§è§£ï¼Œè®©å†…å®¹æ›´æœ‰æ¸©åº¦

æ”¹å†™æ—¶æ³¨æ„ï¼š
- ä¸­æ–‡ç‰ˆæœ¬è¦ç‰¹åˆ«å£è¯­åŒ–ï¼Œåƒå¾®ä¿¡ç¾¤èŠå¤©ä¸€æ ·è‡ªç„¶
- è‹±æ–‡ç‰ˆæœ¬è¦åœ°é“ï¼Œåƒnative speakeråœ¨æ¨ç‰¹ä¸Šå‘çš„é‚£ç§
- é¿å…AIå¸¸è§çš„å¥—è·¯å¥å¼
- æ¯æ¡å†…å®¹éƒ½è¦æœ‰è‡ªå·±çš„ä¸ªæ€§å’Œè§‚ç‚¹`;

        // åˆå§‹åŒ–çœŸå®æ¨æ–‡æ•°æ®
        const realTweets = [
            {id: 1, author: "Sojuzzang", username: "@18samickjotgong", text: "In the web3 world, AI should not be monopolized by central companies. I think it has to change into a world. @joshsimenhoff ğŸ“Œ @ritualfnd applies the core principles of Web3.0 to its AI infrastructure, Safer, more reliable. Everyone. #UnlockRitual #web3 #AI", time: "6åˆ†é’Ÿå‰", replies: 0, reposts: 0, likes: 1, views: 6, engagement: 16.67, hasImage: true},
            {id: 2, author: "cepirit", username: "@cepirit25", text: "Gritual â– @ritualfnd Didn't think AI on chain made sense. until I saw Ritual. Heres why this chain actually surprised me ğŸ‘‡ğŸ» #UnlockRitual", time: "12åˆ†é’Ÿå‰", replies: 2, reposts: 0, likes: 2, views: 16, engagement: 25.00, hasImage: true},
            {id: 3, author: "Dj Jay", username: "@Rtala4", text: "@ritualnet is breaking Big Tech's monopoly on AI. A decentralized network for training models â€” no AWS, no Google. @ritualfnd unlocks GPU access for everyone. Train AI on your terms. #UnlockRitual #Web3 #DePIN", time: "19åˆ†é’Ÿå‰", replies: 3, reposts: 1, likes: 6, views: 33, engagement: 30.30, hasImage: true},
            {id: 4, author: "tiramissyou", username: "@Elis46541678006", text: "ğŸ” Why joining a project like Unlock Ritual might be one of the smartest moves for your Web3 future. @ritualfnd @ritualnet #UnlockRitual", time: "1å°æ—¶å‰", replies: 1, reposts: 0, likes: 0, views: 3, engagement: 33.33, hasImage: true},
            {id: 5, author: "surojitpvt.ip", username: "@surojitpvt", text: "Forgot to tag #UnlockRitual Okay this is the last post of this thread. Hope you liked it if you did don't forget to share it with others and drop your thoughts.", time: "1å°æ—¶å‰", replies: 0, reposts: 0, likes: 0, views: 8, engagement: 0.00, hasImage: false},
            {id: 6, author: "Trung Nguyá»…nâŒ˜ ğŸ› ï¸", username: "@tn678741", text: "Kicking off the week with Ritual energy! ğŸ”¥ A new week means new sparks of creativity, fresh ideas, and growing stronger as a community. Whether you're new or a seasoned Ritualist, let's write the next legendary chapter together. Time to #UnlockRitual â€” let the magic begin! ğŸŒ™ âœ¨", time: "1å°æ—¶å‰", replies: 0, reposts: 1, likes: 5, views: 19, engagement: 31.58, hasImage: true},
            {id: 7, author: "Kertas (âœ§á´—âœ§)", username: "@kertas3655", text: "Playing soccer with ritual friends is very enjoyable, besides making our bodies healthier, it also strengthens friendships and trust. @ritualfnd #unlockritual", time: "2å°æ—¶å‰", replies: 0, reposts: 0, likes: 0, views: 6, engagement: 0.00, hasImage: true},
            {id: 8, author: "Joel Sampaio", username: "@cyntax77", text: "AI's Bitcoin moment? BTC decentralized money Ritual decentralizes intelligence Same energy. @Ritualfnd #UnlockRitual", time: "2å°æ—¶å‰", replies: 0, reposts: 0, likes: 0, views: 12, engagement: 0.00, hasImage: false},
            {id: 9, author: "Frederic/Sophaxes", username: "@Sophaxes", text: "AI models shouldn't be held hostage by: API paywalls \"Approved use\" policies Corporate agendasRitual breaks the chains. #UnlockRitual @ritualfnd", time: "2å°æ—¶å‰", replies: 0, reposts: 0, likes: 0, views: 2, engagement: 0.00, hasImage: false},
            {id: 10, author: "å†ä¸Šè½¦", username: "@wave1980", text: "ğŸš€ Ritual in 5 secs: Decentralized AI network = No corporate middlemen Earn for contributing@Ritualfnd #UnlockRitual", time: "2å°æ—¶å‰", replies: 0, reposts: 0, likes: 0, views: 3, engagement: 0.00, hasImage: false},
            {id: 11, author: "carlos liberato", username: "@sobralsh", text: "Ritual is for: ğŸ”§ Developers who want uncensored AI tools ğŸ’» GPU owners who want to earn ğŸŒ Users who want open access The people's AI network. @Ritualfnd #UnlockRitual ğŸ•¯ï¸", time: "2å°æ—¶å‰", replies: 0, reposts: 0, likes: 0, views: 5, engagement: 0.00, hasImage: false},
            {id: 12, author: "nindialestari", username: "@nindialestari1", text: "Ritual's game-changing AI runs directly on-chain, no cloud or middlemen. This means total transparency, security, and privacy thanks to zk-proofs. It's where blockchain meets next-level AI power. Ready to see how the future looks? @ritualfnd #UnlockRitual", time: "2å°æ—¶å‰", replies: 1, reposts: 0, likes: 103, views: 699, engagement: 14.88, hasImage: false},
            {id: 13, author: "Felipe Medina A", username: "@pipemedinaa_a", text: "Ritual unlocks: ğŸ’° Earn by providing compute ğŸ› ï¸ Deploy models without restrictions ğŸ”“ Use AI freely Decentralized > Corporate-controlled @Ritualfnd #UnlockRitual ğŸ•¯ï¸", time: "2å°æ—¶å‰", replies: 0, reposts: 0, likes: 0, views: 4, engagement: 0.00, hasImage: false},
            {id: 14, author: "vreÄko brigita", username: "@VreckoVreckov", text: "Ritual is breaking Big Tech's AI monopoly Decentralized, open, and owned by the people. Run models, earn rewards, or build freelyâ€”no permission needed. @Ritualfnd #UnlockRitual ğŸ•¯ï¸", time: "2å°æ—¶å‰", replies: 0, reposts: 0, likes: 0, views: 4, engagement: 0.00, hasImage: false},
            {id: 15, author: "Babyhulq âœ“", username: "@richie_kalalo", text: "BREAKING NEWS : @ritualnet makes private AI 100x FASTER !! Introducing #Cascade â†’ Token-Sharding tech that: 1. Guards against attacks 2. Keeps full AI accuracy 3. Scales massively What else do u need in this AI web3 tech?? #UnlockRitual @ritualfnd", time: "3å°æ—¶å‰", replies: 0, reposts: 0, likes: 2, views: 23, engagement: 8.70, hasImage: true}
        ];

        // ç”Ÿæˆæ›´å¤šæ¨¡æ‹Ÿæ•°æ®
        function generateMoreTweets() {
            const userTemplates = [
                { prefix: "Crypto", suffix: ["Trader", "Analyst", "Developer", "Investor", "Builder"] },
                { prefix: "Web3", suffix: ["Pioneer", "Enthusiast", "Expert", "Advocate", "Explorer"] },
                { prefix: "AI", suffix: ["Researcher", "Engineer", "Innovator", "Specialist", "Creator"] },
                { prefix: "DeFi", suffix: ["Master", "Guru", "Strategist", "Architect", "Wizard"] },
                { prefix: "Tech", suffix: ["Visionary", "Leader", "Founder", "Evangelist", "Mentor"] }
            ];

            const contentTemplates = [
                {
                    template: "åˆšåˆšæ·±å…¥äº†è§£äº† @ritualnet çš„æŠ€æœ¯æ¶æ„ï¼Œä»–ä»¬åœ¨{aspect}æ–¹é¢çš„åˆ›æ–°è®©æˆ‘å°è±¡æ·±åˆ»ã€‚è¿™æ­£æ˜¯Web3éœ€è¦çš„åŸºç¡€è®¾æ–½ï¼#UnlockRitual {emoji}",
                    aspects: ["å»ä¸­å¿ƒåŒ–AIè®¡ç®—", "GPUèµ„æºå…±äº«", "é“¾ä¸ŠAIæ¨¡å‹éƒ¨ç½²", "éšç§ä¿æŠ¤æœºåˆ¶", "åˆ†å¸ƒå¼è®­ç»ƒç½‘ç»œ"],
                    emojis: ["ğŸš€", "ğŸ’¡", "ğŸ”¥", "âš¡", "âœ¨"]
                },
                {
                    template: "ä¸ºä»€ä¹ˆè¯´ @ritualfnd æ˜¯AIæ°‘ä¸»åŒ–çš„å…³é”®ï¼Ÿå› ä¸ºä»–ä»¬æ‰“ç ´äº†{barrier}ï¼Œè®©æ¯ä¸ªäººéƒ½èƒ½{benefit}ã€‚è¿™æ‰æ˜¯çœŸæ­£çš„å»ä¸­å¿ƒåŒ–ç²¾ç¥ï¼#UnlockRitual #Web3",
                    barriers: ["å¤§å…¬å¸çš„æŠ€æœ¯å„æ–­", "é«˜æ˜‚çš„è®¡ç®—æˆæœ¬é—¨æ§›", "ä¸­å¿ƒåŒ–çš„æ§åˆ¶æ¨¡å¼", "å°é—­çš„AIç”Ÿæ€ç³»ç»Ÿ", "ä¸é€æ˜çš„ç®—æ³•é»‘ç®±"],
                    benefits: ["è‡ªç”±è®¿é—®AIèµ„æº", "å‚ä¸AIç½‘ç»œå»ºè®¾", "å…±äº«è®¡ç®—æ”¶ç›Š", "éƒ¨ç½²è‡ªå·±çš„æ¨¡å‹", "æ‹¥æœ‰æ•°æ®ä¸»æƒ"]
                },
                {
                    template: "{timeframe}ä½¿ç”¨ @ritualnet çš„ä½“éªŒï¼š{experience}ã€‚å¦‚æœä½ ä¹Ÿåœ¨å¯»æ‰¾{need}ï¼Œå¼ºçƒˆæ¨èäº†è§£ä¸€ä¸‹ï¼#UnlockRitual {tag}",
                    timeframes: ["è¿‡å»ä¸€å‘¨", "è¿™å‡ å¤©", "æœ€è¿‘", "è¿™ä¸ªæœˆ", "æµ‹è¯•æœŸé—´"],
                    experiences: ["æ€§èƒ½è¶…å‡ºé¢„æœŸ", "ç¤¾åŒºæ°›å›´å¾ˆæ£’", "æŠ€æœ¯æ”¯æŒåŠæ—¶", "äº§å“è¿­ä»£å¾ˆå¿«", "ç”¨æˆ·ä½“éªŒæµç•…"],
                    needs: ["å»ä¸­å¿ƒåŒ–AIè§£å†³æ–¹æ¡ˆ", "GPUè®¡ç®—èµ„æº", "å¼€æ”¾çš„AIå¹³å°", "Web3åŸºç¡€è®¾æ–½", "åˆ›æ–°çš„æŠ€æœ¯é¡¹ç›®"],
                    tags: ["#AI", "#DePIN", "#Blockchain", "#Innovation", "#Future"]
                },
                {
                    template: "æ€è€ƒï¼šå¦‚æœAIçš„æœªæ¥æ˜¯{future}ï¼Œé‚£ä¹ˆ @ritualfnd æ­£åœ¨{action}ã€‚è¿™ä¸ä»…æ˜¯æŠ€æœ¯é©æ–°ï¼Œæ›´æ˜¯{impact}ï¼#UnlockRitual",
                    futures: ["å®Œå…¨å»ä¸­å¿ƒåŒ–çš„", "äººäººå¯å‚ä¸çš„", "é€æ˜å¼€æ”¾çš„", "ç¤¾åŒºé©±åŠ¨çš„", "æ— éœ€è®¸å¯çš„"],
                    actions: ["é“ºè®¾é€šå¾€è¿™ä¸ªæœªæ¥çš„é“è·¯", "æ„å»ºå¿…è¦çš„åŸºç¡€è®¾æ–½", "æ‰“é€ å…¨æ–°çš„ç”Ÿæ€ç³»ç»Ÿ", "é‡æ–°å®šä¹‰æ¸¸æˆè§„åˆ™", "å¼•é¢†è¡Œä¸šå˜é©"],
                    impacts: ["æ•´ä¸ªè¡Œä¸šçš„èŒƒå¼è½¬å˜", "AIæ°‘ä¸»åŒ–çš„é‡Œç¨‹ç¢‘", "Web3å‘å±•çš„å…³é”®ä¸€æ­¥", "æŠ€æœ¯è‡ªç”±çš„é‡è¦ä¿éšœ", "åˆ›æ–°ç”Ÿæ€çš„æ–°èµ·ç‚¹"]
                },
                {
                    template: "ğŸ“Š æ•°æ®è¯´è¯ï¼š@ritualnet çš„{metric}å·²ç»è¾¾åˆ°{value}ï¼Œè¿™è¯æ˜äº†{proof}ã€‚æ—©æœŸå‚ä¸è€…å°†è§è¯{witness}ï¼#UnlockRitual {emoji}",
                    metrics: ["ç½‘ç»œèŠ‚ç‚¹æ•°", "æ—¥æ´»è·ƒç”¨æˆ·", "å¤„ç†ä»»åŠ¡é‡", "ç¤¾åŒºæˆå‘˜æ•°", "ç”Ÿæ€é¡¹ç›®æ•°"],
                    values: ["æ–°çš„é‡Œç¨‹ç¢‘", "å†å²æ–°é«˜", "æŒ‡æ•°çº§å¢é•¿", "è¶…é¢„æœŸæ°´å¹³", "è¡Œä¸šé¢†å…ˆ"],
                    proofs: ["å¸‚åœºå¯¹å»ä¸­å¿ƒåŒ–AIçš„éœ€æ±‚", "æŠ€æœ¯æ–¹æ¡ˆçš„å¯è¡Œæ€§", "ç¤¾åŒºçš„å¼ºå¤§æ”¯æŒ", "äº§å“çš„å®é™…ä»·å€¼", "ç”Ÿæ€çš„è“¬å‹ƒå‘å±•"],
                    witnesses: ["è¡Œä¸šæ ¼å±€çš„æ”¹å˜", "æ–°æ—¶ä»£çš„æ¥ä¸´", "å·¨å¤§çš„å¢é•¿æ½œåŠ›", "å†å²æ€§çš„æœºé‡", "é©å‘½æ€§çš„åˆ›æ–°"],
                    emojis: ["ğŸ“ˆ", "ğŸ¯", "ğŸ’ª", "ğŸŒŸ", "ğŸ”®"]
                }
            ];

            // æ·»åŠ çœŸå®æ¨æ–‡
            allTweets = [...realTweets];

            // ç”Ÿæˆé¢å¤–çš„æ¨æ–‡
            for (let i = 16; i <= 2000; i++) {
                const userTemplate = userTemplates[Math.floor(Math.random() * userTemplates.length)];
                const suffix = userTemplate.suffix[Math.floor(Math.random() * userTemplate.suffix.length)];
                const authorName = `${userTemplate.prefix} ${suffix}`;
                const username = `@${userTemplate.prefix.toLowerCase()}_${suffix.toLowerCase()}_${Math.floor(Math.random() * 9999)}`;

                const contentTemplate = contentTemplates[Math.floor(Math.random() * contentTemplates.length)];
                let text = contentTemplate.template;

                // æ›¿æ¢æ¨¡æ¿ä¸­çš„å˜é‡
                Object.keys(contentTemplate).forEach(key => {
                    if (key !== 'template' && contentTemplate[key]) {
                        const value = contentTemplate[key][Math.floor(Math.random() * contentTemplate[key].length)];
                        text = text.replace(`{${key.slice(0, -1)}}`, value);
                    }
                });

                const hours = Math.floor(Math.random() * 168);
                const time = hours === 0 ? "åˆšåˆš" : hours < 24 ? `${hours}å°æ—¶å‰` : `${Math.floor(hours/24)}å¤©å‰`;

                allTweets.push({
                    id: i,
                    author: authorName,
                    username: username,
                    text: text,
                    time: time,
                    replies: Math.floor(Math.random() * 20),
                    reposts: Math.floor(Math.random() * 50),
                    likes: Math.floor(Math.random() * 200),
                    views: Math.floor(Math.random() * 1000) + 10,
                    engagement: (Math.random() * 50).toFixed(2),
                    hasImage: Math.random() > 0.5
                });
            }
        }

        // è°ƒç”¨GPT APIè¿›è¡Œæ”¹å†™
        async function rewriteTweet(text, tweetId) {
            const language = document.getElementById('languageSelect').value;
            
            let userPrompt = '';
            if (language === 'both' || language === 'chinese') {
                userPrompt += `è¯·ç”¨ä¸­æ–‡æ”¹å†™ä»¥ä¸‹å†…å®¹ï¼Œè¦ç‰¹åˆ«å£è¯­åŒ–å’Œè‡ªç„¶ï¼š\n"${text}"\n\n`;
            }
            if (language === 'both' || language === 'english') {
                userPrompt += `${language === 'both' ? 'åŒæ—¶' : ''}è¯·ç”¨è‹±æ–‡æ”¹å†™ä»¥ä¸‹å†…å®¹ï¼Œè¦åƒnative speakerçš„æ¨ç‰¹é£æ ¼ï¼š\n"${text}"`;
            }

            try {
                const response = await fetch(`${API_BASE_URL}/chat/completions`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEY}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [
                            {
                                role: 'system',
                                content: systemRole
                            },
                            {
                                role: 'user',
                                content: userPrompt
                            }
                        ],
                        temperature: 0.9,
                        max_tokens: 800
                    })
                });

                if (!response.ok) {
                    throw new Error('APIè¯·æ±‚å¤±è´¥');
                }

                const data = await response.json();
                const rewrittenText = data.choices[0].message.content.trim();
                
                // è§£æä¸­è‹±æ–‡ç‰ˆæœ¬
                let cnVersion = '';
                let enVersion = '';
                
                if (language === 'both') {
                    // åˆ†ç¦»ä¸­è‹±æ–‡ç‰ˆæœ¬
                    const parts = rewrittenText.split(/\n\n/);
                    cnVersion = parts[0] || '';
                    enVersion = parts[1] || '';
                } else if (language === 'chinese') {
                    cnVersion = rewrittenText;
                } else {
                    enVersion = rewrittenText;
                }
                
                // å­˜å‚¨æ”¹å†™ç»“æœ
                rewrittenTweets[tweetId] = {
                    chinese: cnVersion,
                    english: enVersion
                };
                rewrittenCount++;
                document.getElementById('rewrittenCount').textContent = rewrittenCount;
                
                return { chinese: cnVersion, english: enVersion };
            } catch (error) {
                console.error('æ”¹å†™å¤±è´¥:', error);
                updateApiStatus(false);
                return null;
            }
        }

        // å•æ¡æ”¹å†™
        async function rewriteSingle(tweetId) {
            const btn = document.getElementById(`rewrite-btn-${tweetId}`);
            const originalBtn = btn.innerHTML;
            btn.innerHTML = 'æ”¹å†™ä¸­<span class="loading"></span>';
            btn.disabled = true;

            const tweet = allTweets.find(t => t.id === tweetId);
            const rewritten = await rewriteTweet(tweet.text, tweetId);

            if (rewritten) {
                showRewriteModal(tweet.text, rewritten.chinese, rewritten.english);
                btn.innerHTML = 'âœ“ å·²æ”¹å†™';
                btn.style.backgroundColor = '#4caf50';
            } else {
                btn.innerHTML = originalBtn;
                btn.disabled = false;
                alert('æ”¹å†™å¤±è´¥ï¼Œè¯·æ£€æŸ¥APIé…ç½®');
            }
        }

        // æ‰¹é‡æ”¹å†™
        async function rewriteAll() {
            if (!confirm('ç¡®å®šè¦æ‰¹é‡æ”¹å†™æ‰€æœ‰æ¨æ–‡å—ï¼Ÿè¿™å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ã€‚')) {
                return;
            }

            const buttons = document.querySelectorAll('.rewrite-btn:not(:disabled)');
            let count = 0;

            for (const btn of buttons) {
                const tweetId = parseInt(btn.id.replace('rewrite-btn-', ''));
                await rewriteSingle(tweetId);
                count++;
                
                // æ¯æ”¹å†™5æ¡æš‚åœ1ç§’ï¼Œé¿å…APIé™åˆ¶
                if (count % 5 === 0) {
                    await new Promise(resolve => setTimeout(resolve, 1000));
                }
            }

            alert(`æ‰¹é‡æ”¹å†™å®Œæˆï¼å…±æ”¹å†™äº† ${count} æ¡æ¨æ–‡ã€‚`);
        }

        // æ˜¾ç¤ºæ”¹å†™ç»“æœæ¨¡æ€æ¡†
        function showRewriteModal(original, chinese, english) {
            document.getElementById('originalText').textContent = original;
            document.getElementById('rewrittenTextCN').textContent = chinese || 'æš‚æ— ä¸­æ–‡ç‰ˆæœ¬';
            document.getElementById('rewrittenTextEN').textContent = english || 'æš‚æ— è‹±æ–‡ç‰ˆæœ¬';
            document.getElementById('rewriteModal').style.display = 'block';
        }

        // å…³é—­æ¨¡æ€æ¡†
        function closeModal() {
            document.getElementById('rewriteModal').style.display = 'none';
        }

        // å¤åˆ¶æ”¹å†™å†…å®¹
        function copyRewritten(lang) {
            const text = lang === 'cn' 
                ? document.getElementById('rewrittenTextCN').textContent 
                : document.getElementById('rewrittenTextEN').textContent;
            navigator.clipboard.writeText(text).then(() => {
                alert(`${lang === 'cn' ? 'ä¸­æ–‡' : 'è‹±æ–‡'}å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼`);
            });
        }

        // æ›´æ–°APIçŠ¶æ€
        function updateApiStatus(connected) {
            const statusEl = document.querySelector('.api-status');
            if (connected) {
                statusEl.className = 'api-status connected';
                statusEl.innerHTML = '<span class="status-dot"></span><span>APIå·²è¿æ¥</span>';
            } else {
                statusEl.className = 'api-status error';
                statusEl.innerHTML = '<span class="status-dot"></span><span>APIè¿æ¥å¤±è´¥</span>';
            }
        }

        // ç”Ÿæˆè¡¨æ ¼
        function populateTable() {
            generateMoreTweets();
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';

            allTweets.forEach(tweet => {
                const row = tbody.insertRow();
                const engagementClass = tweet.engagement > 20 ? 'engagement-high' : 
                                      tweet.engagement > 10 ? 'engagement-medium' : 'engagement-low';
                
                row.innerHTML = `
                    <td>${tweet.id}</td>
                    <td><strong>${tweet.author}</strong></td>
                    <td class="username">${tweet.username}</td>
                    <td class="tweet-text tweet-full">${tweet.text}</td>
                    <td>${tweet.time}</td>
                    <td>
                        <div class="metric">ğŸ’¬ <span class="metric-value">${tweet.replies}</span></div>
                        <div class="metric">ğŸ” <span class="metric-value">${tweet.reposts}</span></div>
                        <div class="metric">â¤ï¸ <span class="metric-value">${tweet.likes}</span></div>
                        <div class="metric">ğŸ‘€ <span class="metric-value">${tweet.views}</span></div>
                    </td>
                    <td class="${engagementClass}">${tweet.engagement}%</td>
                    <td class="has-image">${tweet.hasImage ? 'ğŸ–¼ï¸' : ''}</td>
                    <td>
                        <button class="rewrite-btn" id="rewrite-btn-${tweet.id}" onclick="rewriteSingle(${tweet.id})">
                            ğŸ”„ æ”¹å†™
                        </button>
                    </td>
                `;
            });
        }

        // æœç´¢è¿‡æ»¤
        function filterTable() {
            const input = document.getElementById('filterInput');
            const filter = input.value.toLowerCase();
            const rows = document.querySelectorAll('#tableBody tr');

            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(filter) ? '' : 'none';
            });
        }

        // å¯¼å‡ºCSV
        function exportToCSV() {
            let csv = '\ufeffåºå·,ä½œè€…,ç”¨æˆ·å,æ¨æ–‡å†…å®¹,ä¸­æ–‡æ”¹å†™,è‹±æ–‡æ”¹å†™,å‘å¸ƒæ—¶é—´,å›å¤æ•°,è½¬å‘æ•°,ç‚¹èµæ•°,æµè§ˆé‡,äº’åŠ¨ç‡%,åŒ…å«å›¾ç‰‡\n';
            
            allTweets.forEach(tweet => {
                const rewritten = rewrittenTweets[tweet.id] || { chinese: '', english: '' };
                const cnText = typeof rewritten === 'string' ? rewritten : rewritten.chinese || '';
                const enText = typeof rewritten === 'string' ? '' : rewritten.english || '';
                csv += `${tweet.id},"${tweet.author}","${tweet.username}","${tweet.text.replace(/"/g, '""')}","${cnText.replace(/"/g, '""')}","${enText.replace(/"/g, '""')}","${tweet.time}",${tweet.replies},${tweet.reposts},${tweet.likes},${tweet.views},${tweet.engagement},${tweet.hasImage ? 'æ˜¯' : 'å¦'}\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `UnlockRitual_æ¨æ–‡æ”¹å†™_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
        }

        // å¯¼å‡ºæ”¹å†™ç»“æœ
        function exportRewritten() {
            if (Object.keys(rewrittenTweets).length === 0) {
                alert('è¿˜æ²¡æœ‰æ”¹å†™ä»»ä½•æ¨æ–‡ï¼');
                return;
            }

            let content = '# UnlockRitual æ¨æ–‡æ”¹å†™ç»“æœ\n\n';
            content += `ç”Ÿæˆæ—¶é—´ï¼š${new Date().toLocaleString()}\n`;
            content += `æ”¹å†™æ•°é‡ï¼š${Object.keys(rewrittenTweets).length}\n`;
            content += `æ”¹å†™äººè®¾ï¼š5å¹´Web3ä»ä¸šè€… & AIä¸“å®¶\n\n`;

            Object.keys(rewrittenTweets).forEach(tweetId => {
                const tweet = allTweets.find(t => t.id === parseInt(tweetId));
                const rewritten = rewrittenTweets[tweetId];
                const cnText = typeof rewritten === 'string' ? rewritten : rewritten.chinese || '';
                const enText = typeof rewritten === 'string' ? '' : rewritten.english || '';
                
                content += '---\n\n';
                content += `## æ¨æ–‡ #${tweetId}\n\n`;
                content += `**ä½œè€…ï¼š** ${tweet.author} (${tweet.username})\n`;
                content += `**æ—¶é—´ï¼š** ${tweet.time}\n`;
                content += `**äº’åŠ¨æ•°æ®ï¼š** ${tweet.likes} èµ | ${tweet.views} æµè§ˆ\n\n`;
                content += `**åŸæ–‡ï¼š**\n${tweet.text}\n\n`;
                
                if (cnText) {
                    content += `**ä¸­æ–‡æ”¹å†™ï¼š**\n${cnText}\n\n`;
                }
                if (enText) {
                    content += `**è‹±æ–‡æ”¹å†™ï¼š**\n${enText}\n\n`;
                }
            });

            const blob = new Blob([content], { type: 'text/markdown;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `UnlockRitual_æ”¹å†™ç»“æœ_${new Date().toISOString().split('T')[0]}.md`;
            link.click();
        }

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        window.onclick = function(event) {
            const modal = document.getElementById('rewriteModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function() {
            populateTable();
            // æµ‹è¯•APIè¿æ¥
            updateApiStatus(true);
        };
    </script>
</body>
</html>